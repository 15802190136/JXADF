!function(){var t,e=this,i=this.Flotr;t={_:_,bean:bean,isIphone:/iphone/i.test(navigator.userAgent),isIE:-1!=navigator.appVersion.indexOf("MSIE")?parseFloat(navigator.appVersion.split("MSIE")[1]):!1,graphTypes:{},plugins:{},addType:function(e,i){t.graphTypes[e]=i,t.defaultOptions[e]=i.options||{},t.defaultOptions.defaultType=t.defaultOptions.defaultType||e},addPlugin:function(e,i){t.plugins[e]=i,t.defaultOptions[e]=i.options||{}},draw:function(e,i,o,s){return new(s=s||t.Graph)(e,i,o)},merge:function(e,i){var o,s,a=i||{};for(o in e)s=e[o],a[o]=s&&"object"==typeof s?s.constructor===Array?this._.clone(s):s.constructor===RegExp||this._.isElement(s)||s.jquery?s:t.merge(s,i?i[o]:void 0):s;return a},clone:function(e){return t.merge(e,{})},getTickSize:function(e,i,o,s){var a=(o-i)/e,n=t.getMagnitude(a),l=10,r=a/n;return 1.5>r?l=1:2.25>r?l=2:3>r?l=0===s?2:2.5:7.5>r&&(l=5),l*n},defaultTickFormatter:function(t){return t+""},defaultTrackFormatter:function(t){return"("+t.x+", "+t.y+")"},engineeringNotation:function(t,e,i){var o=["Y","Z","E","P","T","G","M","k",""],s=["y","z","a","f","p","n","Âµ","m",""],a=o.length;if(i=i||1e3,e=Math.pow(10,e||2),0===t)return 0;if(t>1)for(;a--&&t>=i;)t/=i;else for(o=s,a=o.length;a--&&1>t;)t*=i;return Math.round(t*e)/e+o[a]},getMagnitude:function(t){return Math.pow(10,Math.floor(Math.log(t)/Math.LN10))},toPixel:function(t){return Math.floor(t)+.5},toRad:function(t){return-t*(Math.PI/180)},floorInBase:function(t,e){return e*Math.floor(t/e)},drawText:function(e,i,o,s,a){return e.fillText?(a=this._.extend({size:t.defaultOptions.fontSize,color:"#000000",textAlign:"left",textBaseline:"bottom",weight:1,angle:0},a),e.save(),e.translate(o,s),e.rotate(a.angle),e.fillStyle=a.color,e.font=(a.weight>1?"bold ":"")+1.3*a.size+"px sans-serif",e.textAlign=a.textAlign,e.textBaseline=a.textBaseline,e.fillText(i,0,0),void e.restore()):void e.drawText(i,o,s,a)},getBestTextAlign:function(e,i){return i=i||{textAlign:"center",textBaseline:"middle"},e+=t.getTextAngleFromAlign(i),Math.abs(Math.cos(e))>.01&&(i.textAlign=Math.cos(e)>0?"right":"left"),Math.abs(Math.sin(e))>.01&&(i.textBaseline=Math.sin(e)>0?"top":"bottom"),i},alignTable:{"right middle":0,"right top":Math.PI/4,"center top":Math.PI/2,"left top":3*(Math.PI/4),"left middle":Math.PI,"left bottom":-3*(Math.PI/4),"center bottom":-Math.PI/2,"right bottom":-Math.PI/4,"center middle":0},getTextAngleFromAlign:function(e){return t.alignTable[e.textAlign+" "+e.textBaseline]||0},noConflict:function(){return e.Flotr=i,this}},e.Flotr=t}(),Flotr.defaultOptions={colors:["#00A8F0","#C0D800","#CB4B4B","#4DA74D","#9440ED"],ieBackgroundColor:"#FFFFFF",title:null,subtitle:null,shadowSize:4,defaultType:null,HtmlText:!0,fontColor:"#545454",fontSize:7.5,resolution:1,parseFloat:!0,preventDefault:!0,xaxis:{ticks:null,minorTicks:null,showLabels:!0,showMinorLabels:!1,labelsAngle:0,title:null,titleAngle:0,noTicks:5,minorTickFreq:null,tickFormatter:Flotr.defaultTickFormatter,tickDecimals:null,min:null,max:null,autoscale:!1,autoscaleMargin:0,color:null,mode:"normal",timeFormat:null,timeMode:"UTC",timeUnit:"millisecond",scaling:"linear",base:Math.E,titleAlign:"center",margin:!0},x2axis:{},yaxis:{ticks:null,minorTicks:null,showLabels:!0,showMinorLabels:!1,labelsAngle:0,title:null,titleAngle:90,noTicks:5,minorTickFreq:null,tickFormatter:Flotr.defaultTickFormatter,tickDecimals:null,min:null,max:null,autoscale:!1,autoscaleMargin:0,color:null,scaling:"linear",base:Math.E,titleAlign:"center",margin:!0},y2axis:{titleAngle:270},grid:{color:"#545454",backgroundColor:null,backgroundImage:null,watermarkAlpha:.4,tickColor:"#DDDDDD",labelMargin:3,verticalLines:!0,minorVerticalLines:null,horizontalLines:!0,minorHorizontalLines:null,outlineWidth:1,outline:"nsew",circular:!1},mouse:{track:!1,trackAll:!1,position:"se",relative:!1,trackFormatter:Flotr.defaultTrackFormatter,margin:5,lineColor:"#FF3F19",trackDecimals:1,sensibility:2,trackY:!0,radius:3,fillColor:null,fillOpacity:.4}},function(){function t(){this.rgba=["r","g","b","a"];for(var t=4;-1<--t;)this[this.rgba[t]]=arguments[t]||(3==t?1:0);this.normalize()}var e=Flotr._,i={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]};t.prototype={scale:function(){for(var t=4;-1<--t;)e.isUndefined(arguments[t])||(this[this.rgba[t]]*=arguments[t]);return this.normalize()},alpha:function(t){return e.isUndefined(t)||e.isNull(t)||(this.a=t),this.normalize()},clone:function(){return new t(this.r,this.b,this.g,this.a)},limit:function(t,e,i){return Math.max(Math.min(t,i),e)},normalize:function(){var t=this.limit;return this.r=t(parseInt(this.r,10),0,255),this.g=t(parseInt(this.g,10),0,255),this.b=t(parseInt(this.b,10),0,255),this.a=t(this.a,0,1),this},distance:function(e){if(e){e=new t.parse(e);for(var i=0,o=3;-1<--o;)i+=Math.abs(this[this.rgba[o]]-e[this.rgba[o]]);return i}},toString:function(){return this.a>=1?"rgb("+[this.r,this.g,this.b].join(",")+")":"rgba("+[this.r,this.g,this.b,this.a].join(",")+")"},contrast:function(){var t=1-(.299*this.r+.587*this.g+.114*this.b)/255;return.5>t?"#000000":"#ffffff"}},e.extend(t,{parse:function(e){if(e instanceof t)return e;var o;if(o=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(e))return new t(parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16));if(o=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(e))return new t(parseInt(o[1],10),parseInt(o[2],10),parseInt(o[3],10));if(o=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(e))return new t(parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16));if(o=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(e))return new t(parseInt(o[1],10),parseInt(o[2],10),parseInt(o[3],10),parseFloat(o[4]));if(o=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(e))return new t(2.55*parseFloat(o[1]),2.55*parseFloat(o[2]),2.55*parseFloat(o[3]));if(o=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(e))return new t(2.55*parseFloat(o[1]),2.55*parseFloat(o[2]),2.55*parseFloat(o[3]),parseFloat(o[4]));var s=(e+"").replace(/^\s*([\S\s]*?)\s*$/,"$1").toLowerCase();return"transparent"==s?new t(255,255,255,0):(o=i[s])?new t(o[0],o[1],o[2]):new t(0,0,0,0)},processColor:function(i,o){var s=o.opacity;if(!i)return"rgba(0, 0, 0, 0)";if(i instanceof t)return i.alpha(s).toString();if(e.isString(i))return t.parse(i).alpha(s).toString();var a=i.colors?i:{colors:i};if(!o.ctx)return e.isArray(a.colors)?t.parse(e.isArray(a.colors[0])?a.colors[0][1]:a.colors[0]).alpha(s).toString():"rgba(0, 0, 0, 0)";a=e.extend({start:"top",end:"bottom"},a),/top/i.test(a.start)&&(o.x1=0),/left/i.test(a.start)&&(o.y1=0),/bottom/i.test(a.end)&&(o.x2=0),/right/i.test(a.end)&&(o.y2=0);var n,l,r,h=o.ctx.createLinearGradient(o.x1,o.y1,o.x2,o.y2);for(n=0;n<a.colors.length;n++)l=a.colors[n],e.isArray(l)?(r=l[0],l=l[1]):r=n/(a.colors.length-1),h.addColorStop(r,t.parse(l).alpha(s));return h}}),Flotr.Color=t}(),Flotr.Date={set:function(t,e,i,o){i=i||"UTC",e="set"+("UTC"===i?"UTC":"")+e,t[e](o)},get:function(t,e,i){return i=i||"UTC",e="get"+("UTC"===i?"UTC":"")+e,t[e]()},format:function(t,e,i){function o(t){return t+="",1==t.length?"0"+t:t}if(t){for(var s,a=this.get,n={h:a(t,"Hours",i).toString(),H:o(a(t,"Hours",i)),M:o(a(t,"Minutes",i)),S:o(a(t,"Seconds",i)),s:a(t,"Milliseconds",i),d:a(t,"Date",i).toString(),m:(a(t,"Month",i)+1).toString(),y:a(t,"FullYear",i).toString(),b:Flotr.Date.monthNames[a(t,"Month",i)]},l=[],r=!1,h=0;h<e.length;++h)s=e.charAt(h),r?(l.push(n[s]||s),r=!1):"%"==s?r=!0:l.push(s);return l.join("")}},getFormat:function(t,e){var i=Flotr.Date.timeUnits;return t<i.second?"%h:%M:%S.%s":t<i.minute?"%h:%M:%S":t<i.day?e<2*i.day?"%h:%M":"%b %d %h:%M":t<i.month?"%b %d":t<i.year?e<i.year?"%b":"%b %y":"%y"},formatter:function(t,e){var i=e.options,o=Flotr.Date.timeUnits[i.timeUnit],s=new Date(t*o);if(e.options.timeFormat)return Flotr.Date.format(s,i.timeFormat,i.timeMode);var a=(e.max-e.min)*o,n=e.tickSize*Flotr.Date.timeUnits[e.tickUnit];return Flotr.Date.format(s,Flotr.Date.getFormat(n,a),i.timeMode)},generator:function(t){function e(t){a(m,t,c,Flotr.floorInBase(n(m,t,c),x))}var i,o,s,a=this.set,n=this.get,l=this.timeUnits,r=this.spec,h=t.options,c=h.timeMode,d=l[h.timeUnit],f=t.min*d,u=t.max*d,p=(u-f)/h.noTicks,g=[],x=t.tickSize;for(o=h.tickFormatter===Flotr.defaultTickFormatter?this.formatter:h.tickFormatter,s=0;s<r.length-1;++s){var m=r[s][0]*l[r[s][1]];if(p<(m+r[s+1][0]*l[r[s+1][1]])/2&&m>=x)break}x=r[s][0],i=r[s][1],"year"==i&&(x=Flotr.getTickSize(h.noTicks*l.year,f,u,0),.5==x&&(i="month",x=6)),t.tickUnit=i,t.tickSize=x;var v=x*l[i];switch(m=new Date(f),i){case"millisecond":e("Milliseconds");break;case"second":e("Seconds");break;case"minute":e("Minutes");break;case"hour":e("Hours");break;case"month":e("Month");break;case"year":e("FullYear")}v>=l.second&&a(m,"Milliseconds",c,0),v>=l.minute&&a(m,"Seconds",c,0),v>=l.hour&&a(m,"Minutes",c,0),v>=l.day&&a(m,"Hours",c,0),v>=4*l.day&&a(m,"Date",c,1),v>=l.year&&a(m,"Month",c,0);var b,y=0,M=0/0;do if(b=M,M=m.getTime(),g.push({v:M/d,label:o(M/d,t)}),"month"==i)if(1>x){a(m,"Date",c,1);var k=m.getTime();a(m,"Month",c,n(m,"Month",c)+1);var w=m.getTime();m.setTime(M+y*l.hour+(w-k)*x),y=n(m,"Hours",c),a(m,"Hours",c,0)}else a(m,"Month",c,n(m,"Month",c)+x);else"year"==i?a(m,"FullYear",c,n(m,"FullYear",c)+x):m.setTime(M+v);while(u>M&&M!=b);return g},timeUnits:{millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,month:2592e6,year:31556952e3},spec:[[1,"millisecond"],[20,"millisecond"],[50,"millisecond"],[100,"millisecond"],[200,"millisecond"],[500,"millisecond"],[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"],[3,"month"],[6,"month"],[1,"year"]],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},function(){function t(t){return t&&t.jquery?t[0]:t}var e=Flotr._;Flotr.DOM={addClass:function(i,o){i=t(i);var s=i.className?i.className:"";e.include(s.split(/\s+/g),o)||(i.className=(s?s+" ":"")+o)},create:function(t){return document.createElement(t)},node:function(t){var e,i=Flotr.DOM.create("div");return i.innerHTML=t,e=i.children[0],i.innerHTML="",e},empty:function(e){e=t(e),e.innerHTML=""},remove:function(e){e=t(e),e.parentNode.removeChild(e)},hide:function(e){e=t(e),Flotr.DOM.setStyles(e,{display:"none"})},insert:function(i,o){i=t(i),e.isString(o)?i.innerHTML+=o:e.isElement(o)&&i.appendChild(o)},opacity:function(e,i){e=t(e),e.style.opacity=i},position:function(e,i){return e=t(e),e.offsetParent?(i=this.position(e.offsetParent),i.left+=e.offsetLeft,i.top+=e.offsetTop,i):{left:e.offsetLeft||0,top:e.offsetTop||0}},removeClass:function(i,o){var s=i.className?i.className:"";i=t(i),i.className=e.filter(s.split(/\s+/g),function(t){return t!=o?!0:void 0}).join(" ")},setStyles:function(i,o){i=t(i),e.each(o,function(t,e){i.style[e]=t})},show:function(e){e=t(e),Flotr.DOM.setStyles(e,{display:""})},size:function(e){return e=t(e),{height:e.offsetHeight,width:e.offsetWidth}}}}(),function(){var t=Flotr,e=t.bean;t.EventAdapter={observe:function(t,i,o){return e.add(t,i,o),this},fire:function(t,i,o){return e.fire(t,i,o),"undefined"!=typeof Prototype&&Event.fire(t,i,o),this},stopObserving:function(t,i,o){return e.remove(t,i,o),this},eventPointer:function(e){if(!t._.isUndefined(e.touches)&&e.touches.length>0)return{x:e.touches[0].pageX,y:e.touches[0].pageY};if(!t._.isUndefined(e.changedTouches)&&e.changedTouches.length>0)return{x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY};if(e.pageX||e.pageY)return{x:e.pageX,y:e.pageY};if(e.clientX||e.clientY){var i=document,o=i.body,s=i.documentElement;return{x:e.clientX+o.scrollLeft+s.scrollLeft,y:e.clientY+o.scrollTop+s.scrollTop}}}}}(),function(){var t=Flotr,e=t.DOM,i=t._,o=function(t){this.o=t};o.prototype={dimensions:function(t,e,i,o){return t?this.o.html?this.html(t,this.o.element,i,o):this.canvas(t,e):{width:0,height:0}},canvas:function(e,i){if(this.o.textEnabled){i=i||{};var o,s=this.measureText(e,i),a=s.width,n=i.size||t.defaultOptions.fontSize,l=i.angle||0,r=Math.cos(l),h=Math.sin(l),c=2,d=6;return o={width:Math.abs(r*a)+Math.abs(h*n)+c,height:Math.abs(h*a)+Math.abs(r*n)+d}}},html:function(t,i,o,s){var a=e.create("div");return e.setStyles(a,{position:"absolute",top:"-10000px"}),e.insert(a,'<div style="'+o+'" class="'+s+' flotr-dummy-div">'+t+"</div>"),e.insert(this.o.element,a),e.size(a)},measureText:function(e,o){var s,a=this.o.ctx;return!a.fillText||t.isIphone&&a.measure?{width:a.measure(e,o)}:(o=i.extend({size:t.defaultOptions.fontSize,weight:1,angle:0},o),a.save(),a.font=(o.weight>1?"bold ":"")+1.3*o.size+"px sans-serif",s=a.measureText(e),a.restore(),s)}},Flotr.Text=o}(),function(){function t(){return i.observe.apply(this,arguments),this._handles.push(arguments),this}var e=Flotr.DOM,i=Flotr.EventAdapter,o=Flotr._,s=Flotr;Graph=function(t,e,a){this._setEl(t),this._initMembers(),this._initPlugins(),i.fire(this.el,"flotr:beforeinit",[this]),this.data=e,this.series=s.Series.getSeries(e),this._initOptions(a),this._initGraphTypes(),this._initCanvas(),this._text=new s.Text({element:this.el,ctx:this.ctx,html:this.options.HtmlText,textEnabled:this.textEnabled}),i.fire(this.el,"flotr:afterconstruct",[this]),this._initEvents(),this.findDataRanges(),this.calculateSpacing(),this.draw(o.bind(function(){i.fire(this.el,"flotr:afterinit",[this])},this))},Graph.prototype={destroy:function(){i.fire(this.el,"flotr:destroy"),o.each(this._handles,function(t){i.stopObserving.apply(this,t)}),this._handles=[],this.el.graph=null},observe:t,_observe:t,processColor:function(t,e){var i={x1:0,y1:0,x2:this.plotWidth,y2:this.plotHeight,opacity:1,ctx:this.ctx};return o.extend(i,e),s.Color.processColor(t,i)},findDataRanges:function(){var t,e,i,a=this.axes;o.each(this.series,function(o){i=o.getRange(),i&&(t=o.xaxis,e=o.yaxis,t.datamin=Math.min(i.xmin,t.datamin),t.datamax=Math.max(i.xmax,t.datamax),e.datamin=Math.min(i.ymin,e.datamin),e.datamax=Math.max(i.ymax,e.datamax),t.used=t.used||i.xused,e.used=e.used||i.yused)},this),a.x.used||a.x2.used||(a.x.used=!0),a.y.used||a.y2.used||(a.y.used=!0),o.each(a,function(t){t.calculateRange()});var n=o.keys(s.graphTypes),l=!1;o.each(this.series,function(t){t.hide||(o.each(n,function(e){t[e]&&t[e].show&&(this.extendRange(e,t),l=!0)},this),l||this.extendRange(this.options.defaultType,t))},this)},extendRange:function(t,e){this[t].extendRange&&this[t].extendRange(e,e.data,e[t],this[t]),this[t].extendYRange&&this[t].extendYRange(e.yaxis,e.data,e[t],this[t]),this[t].extendXRange&&this[t].extendXRange(e.xaxis,e.data,e[t],this[t])},calculateSpacing:function(){var t,e,i=this.axes,s=this.options,a=this.series,n=s.grid.labelMargin,l=this._text,r=i.x,h=i.x2,c=i.y,d=i.y2,f=s.grid.outlineWidth;for(o.each(i,function(t){t.calculateTicks(),t.calculateTextDimensions(l,s)}),e=l.dimensions(s.title,{size:1.5*s.fontSize},"font-size:1em;font-weight:bold;","flotr-title"),this.titleHeight=e.height,e=l.dimensions(s.subtitle,{size:s.fontSize},"font-size:smaller;","flotr-subtitle"),this.subtitleHeight=e.height,t=0;t<s.length;++t)a[t].points.show&&(f=Math.max(f,a[t].points.radius+a[t].points.lineWidth/2));var u=this.plotOffset;r.options.margin===!1?(u.bottom=0,u.top=0):r.options.margin===!0?(u.bottom+=(s.grid.circular?0:r.used&&r.options.showLabels?r.maxLabel.height+n:0)+(r.used&&r.options.title?r.titleSize.height+n:0)+f,u.top+=(s.grid.circular?0:h.used&&h.options.showLabels?h.maxLabel.height+n:0)+(h.used&&h.options.title?h.titleSize.height+n:0)+this.subtitleHeight+this.titleHeight+f):(u.bottom=r.options.margin,u.top=r.options.margin),c.options.margin===!1?(u.left=0,u.right=0):c.options.margin===!0?(u.left+=(s.grid.circular?0:c.used&&c.options.showLabels?c.maxLabel.width+n:0)+(c.used&&c.options.title?c.titleSize.width+n:0)+f,u.right+=(s.grid.circular?0:d.used&&d.options.showLabels?d.maxLabel.width+n:0)+(d.used&&d.options.title?d.titleSize.width+n:0)+f):(u.left=c.options.margin,u.right=c.options.margin),u.top=Math.floor(u.top),this.plotWidth=this.canvasWidth-u.left-u.right,this.plotHeight=this.canvasHeight-u.bottom-u.top,r.length=h.length=this.plotWidth,c.length=d.length=this.plotHeight,c.offset=d.offset=this.plotHeight,r.setScale(),h.setScale(),c.setScale(),d.setScale()},draw:function(t){var e,o=this.ctx;if(i.fire(this.el,"flotr:beforedraw",[this.series,this]),this.series.length){for(o.save(),o.translate(this.plotOffset.left,this.plotOffset.top),e=0;e<this.series.length;e++)this.series[e].hide||this.drawSeries(this.series[e]);o.restore(),this.clip()}i.fire(this.el,"flotr:afterdraw",[this.series,this]),t&&t()},drawSeries:function(t){function e(t,e){var i=this.getOptions(t,e);this[e].draw(i)}var i=!1;t=t||this.series,o.each(s.graphTypes,function(o,s){t[s]&&t[s].show&&this[s]&&(i=!0,e.call(this,t,s))},this),i||e.call(this,t,this.options.defaultType)},getOptions:function(t,e){var i=t[e],o=(this[e],t.xaxis),a=t.yaxis,n={context:this.ctx,width:this.plotWidth,height:this.plotHeight,fontSize:this.options.fontSize,fontColor:this.options.fontColor,textEnabled:this.textEnabled,htmlText:this.options.HtmlText,text:this._text,element:this.el,data:t.data,color:t.color,shadowSize:t.shadowSize,xScale:o.d2p,yScale:a.d2p,xInverse:o.p2d,yInverse:a.p2d};return n=s.merge(i,n),n.fillStyle=this.processColor(i.fillColor||t.color,{opacity:i.fillOpacity}),n},getEventPosition:function(t){var o,s,a,n=document,l=n.body,r=n.documentElement,h=this.axes,c=this.plotOffset,d=this.lastMousePos,f=i.eventPointer(t),u=f.x-d.pageX,p=f.y-d.pageY;return"ontouchstart"in this.el?(o=e.position(this.overlay),s=f.x-o.left-c.left,a=f.y-o.top-c.top):(o=this.overlay.getBoundingClientRect(),s=t.clientX-o.left-c.left-l.scrollLeft-r.scrollLeft,a=t.clientY-o.top-c.top-l.scrollTop-r.scrollTop),{x:h.x.p2d(s),x2:h.x2.p2d(s),y:h.y.p2d(a),y2:h.y2.p2d(a),relX:s,relY:a,dX:u,dY:p,absX:f.x,absY:f.y,pageX:f.x,pageY:f.y}},clickHandler:function(t){return this.ignoreClick?(this.ignoreClick=!1,this.ignoreClick):void i.fire(this.el,"flotr:click",[this.getEventPosition(t),this])},mouseMoveHandler:function(t){if(!this.mouseDownMoveHandler){var e=this.getEventPosition(t);i.fire(this.el,"flotr:mousemove",[t,e,this]),this.lastMousePos=e}},mouseDownHandler:function(t){this.mouseUpHandler||(this.mouseUpHandler=o.bind(function(t){i.stopObserving(document,"mouseup",this.mouseUpHandler),i.stopObserving(document,"mousemove",this.mouseDownMoveHandler),this.mouseDownMoveHandler=null,this.mouseUpHandler=null,i.fire(this.el,"flotr:mouseup",[t,this])},this),this.mouseDownMoveHandler=o.bind(function(e){var o=this.getEventPosition(e);i.fire(this.el,"flotr:mousemove",[t,o,this]),this.lastMousePos=o},this),i.observe(document,"mouseup",this.mouseUpHandler),i.observe(document,"mousemove",this.mouseDownMoveHandler),i.fire(this.el,"flotr:mousedown",[t,this]),this.ignoreClick=!1)},drawTooltip:function(t,i,o,s){var a=this.getMouseTrack(),n="opacity:0.7;background-color:#000;color:#fff;display:none;position:absolute;padding:2px 8px;-moz-border-radius:4px;border-radius:4px;white-space:nowrap;",l=s.position,r=s.margin,h=this.plotOffset;null!==i&&null!==o?(s.relative?("n"==l.charAt(0)?n+="bottom:"+(r-h.top-o+this.canvasHeight)+"px;top:auto;":"s"==l.charAt(0)&&(n+="top:"+(r+h.top+o)+"px;bottom:auto;"),"e"==l.charAt(1)?n+="left:"+(r+h.left+i)+"px;right:auto;":"w"==l.charAt(1)&&(n+="right:"+(r-h.left-i+this.canvasWidth)+"px;left:auto;")):("n"==l.charAt(0)?n+="top:"+(r+h.top)+"px;bottom:auto;":"s"==l.charAt(0)&&(n+="bottom:"+(r+h.bottom)+"px;top:auto;"),"e"==l.charAt(1)?n+="right:"+(r+h.right)+"px;left:auto;":"w"==l.charAt(1)&&(n+="left:"+(r+h.left)+"px;right:auto;")),a.style.cssText=n,e.empty(a),e.insert(a,t),e.show(a)):e.hide(a)},clip:function(t){var e=this.plotOffset,i=this.canvasWidth,o=this.canvasHeight;if(t=t||this.ctx,s.isIE&&s.isIE<9&&!s.isFlashCanvas){if(t===this.octx)return;t.save(),t.fillStyle=this.processColor(this.options.ieBackgroundColor),t.fillRect(0,0,i,e.top),t.fillRect(0,0,e.left,o),t.fillRect(0,o-e.bottom,i,e.bottom),t.fillRect(i-e.right,0,e.right,o),t.restore()}else t.clearRect(0,0,i,e.top),t.clearRect(0,0,e.left,o),t.clearRect(0,o-e.bottom,i,e.bottom),t.clearRect(i-e.right,0,e.right,o)},_initMembers:function(){this._handles=[],this.lastMousePos={pageX:null,pageY:null},this.plotOffset={left:0,right:0,top:0,bottom:0},this.ignoreClick=!0,this.prevHit=null},_initGraphTypes:function(){o.each(s.graphTypes,function(t,e){this[e]=s.clone(t)},this)},_initEvents:function(){var t,e,s,a=this.el;"ontouchstart"in a?(t=o.bind(function(o){s=!0,i.stopObserving(document,"touchend",t),i.fire(a,"flotr:mouseup",[event,this]),this.multitouches=null,e||this.clickHandler(o)},this),this.observe(this.overlay,"touchstart",o.bind(function(o){e=!1,s=!1,this.ignoreClick=!1,o.touches&&o.touches.length>1&&(this.multitouches=o.touches),i.fire(a,"flotr:mousedown",[event,this]),this.observe(document,"touchend",t)},this)),this.observe(this.overlay,"touchmove",o.bind(function(t){var o=this.getEventPosition(t);this.options.preventDefault&&t.preventDefault(),e=!0,this.multitouches||t.touches&&t.touches.length>1?this.multitouches=t.touches:s||i.fire(a,"flotr:mousemove",[event,o,this]),this.lastMousePos=o},this))):this.observe(this.overlay,"mousedown",o.bind(this.mouseDownHandler,this)).observe(a,"mousemove",o.bind(this.mouseMoveHandler,this)).observe(this.overlay,"click",o.bind(this.clickHandler,this)).observe(a,"mouseout",function(t){i.fire(a,"flotr:mouseout",t)})},_initCanvas:function(){function t(t,i){return t||(t=e.create("canvas"),"undefined"!=typeof FlashCanvas&&"function"==typeof t.getContext&&(FlashCanvas.initElement(t),this.isFlashCanvas=!0),t.className="flotr-"+i,t.style.cssText="position:absolute;left:0px;top:0px;",e.insert(l,t)),o.each(n,function(o,s){e.show(t),("canvas"!=i||t.getAttribute(s)!==o)&&(t.setAttribute(s,o*r.resolution),t.style[s]=o+"px")}),t.context_=null,t}function i(t){window.G_vmlCanvasManager&&window.G_vmlCanvasManager.initElement(t);var e=t.getContext("2d");return window.G_vmlCanvasManager||e.scale(r.resolution,r.resolution),e}var s,a,n,l=this.el,r=this.options,h=l.children,c=[];for(a=h.length;a--;)s=h[a],this.canvas||"flotr-canvas"!==s.className?this.overlay||"flotr-overlay"!==s.className?c.push(s):this.overlay=s:this.canvas=s;for(a=c.length;a--;)l.removeChild(c[a]);if(e.setStyles(l,{position:"relative"}),n={},n.width=l.clientWidth,n.height=l.clientHeight,n.width<=0||n.height<=0||r.resolution<=0)throw"Invalid dimensions for plot, width = "+n.width+", height = "+n.height+", resolution = "+r.resolution;this.canvas=t(this.canvas,"canvas"),this.overlay=t(this.overlay,"overlay"),this.ctx=i(this.canvas),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.octx=i(this.overlay),this.octx.clearRect(0,0,this.overlay.width,this.overlay.height),this.canvasHeight=n.height,this.canvasWidth=n.width,this.textEnabled=!!this.ctx.drawText||!!this.ctx.fillText},_initPlugins:function(){o.each(s.plugins,function(t,e){o.each(t.callbacks,function(t,e){this.observe(this.el,e,o.bind(t,this))},this),this[e]=s.clone(t),o.each(this[e],function(t,i){o.isFunction(t)&&(this[e][i]=o.bind(t,this))},this)},this)},_initOptions:function(t){var e=s.clone(s.defaultOptions);e.x2axis=o.extend(o.clone(e.xaxis),e.x2axis),e.y2axis=o.extend(o.clone(e.yaxis),e.y2axis),this.options=s.merge(t||{},e),null===this.options.grid.minorVerticalLines&&"logarithmic"===this.options.xaxis.scaling&&(this.options.grid.minorVerticalLines=!0),null===this.options.grid.minorHorizontalLines&&"logarithmic"===this.options.yaxis.scaling&&(this.options.grid.minorHorizontalLines=!0),i.fire(this.el,"flotr:afterinitoptions",[this]),this.axes=s.Axis.getAxes(this.options);var a,n,l,r,h=[],c=[],d=this.series.length,f=this.series.length,u=this.options.colors,p=[],g=0;for(n=f-1;n>-1;--n)a=this.series[n].color,a&&(--f,o.isNumber(a)?h.push(a):p.push(s.Color.parse(a)));for(n=h.length-1;n>-1;--n)f=Math.max(f,h[n]+1);for(n=0;c.length<f;){a=u.length==n?new s.Color(100,100,100):s.Color.parse(u[n]);var x=g%2==1?-1:1,m=1+x*Math.ceil(g/2)*.2;a.scale(m,m,m),c.push(a),++n>=u.length&&(n=0,++g)}for(n=0,l=0;d>n;++n){r=this.series[n],r.color?o.isNumber(r.color)&&(r.color=c[r.color].toString()):r.color=c[l++].toString(),r.xaxis||(r.xaxis=this.axes.x),1==r.xaxis?r.xaxis=this.axes.x:2==r.xaxis&&(r.xaxis=this.axes.x2),r.yaxis||(r.yaxis=this.axes.y),1==r.yaxis?r.yaxis=this.axes.y:2==r.yaxis&&(r.yaxis=this.axes.y2);for(var v in s.graphTypes)r[v]=o.extend(o.clone(this.options[v]),r[v]);r.mouse=o.extend(o.clone(this.options.mouse),r.mouse),o.isUndefined(r.shadowSize)&&(r.shadowSize=this.options.shadowSize)}},_setEl:function(t){if(!t)throw"The target container doesn't exist";if(t.graph instanceof Graph)t.graph.destroy();else if(!t.clientWidth)throw"The target container must be visible";t.graph=this,this.el=t}},Flotr.Graph=Graph}(),function(){function t(t){this.orientation=1,this.offset=0,this.datamin=Number.MAX_VALUE,this.datamax=-Number.MAX_VALUE,s.extend(this,t)}function e(t,e){return t=Math.log(Math.max(t,Number.MIN_VALUE)),e!==Math.E&&(t/=Math.log(e)),t}function o(t,e){return e===Math.E?Math.exp(t):Math.pow(e,t)}var s=Flotr._,a="logarithmic";t.prototype={setScale:function(){var t,i=this.length,s=this.max,n=this.min,l=this.offset,r=this.orientation,h=this.options,c=h.scaling===a;t=c?i/(e(s,h.base)-e(n,h.base)):i/(s-n),this.scale=t,c?(this.d2p=function(i){return l+r*(e(i,h.base)-e(n,h.base))*t},this.p2d=function(i){return o((l+r*i)/t+e(n,h.base),h.base)}):(this.d2p=function(e){return l+r*(e-n)*t},this.p2d=function(e){return(l+r*e)/t+n})},calculateTicks:function(){var t=this.options;this.ticks=[],this.minorTicks=[],t.ticks?(this._cleanUserTicks(t.ticks,this.ticks),this._cleanUserTicks(t.minorTicks||[],this.minorTicks)):"time"==t.mode?this._calculateTimeTicks():"logarithmic"===t.scaling?this._calculateLogTicks():this._calculateTicks(),s.each(this.ticks,function(t){t.label+=""}),s.each(this.minorTicks,function(t){t.label+=""})},calculateRange:function(){if(this.used){var t=this,e=t.options,i=null!==e.min?e.min:t.datamin,o=null!==e.max?e.max:t.datamax,s=e.autoscaleMargin;if("logarithmic"==e.scaling&&(0>=i&&(i=t.datamin),0>=o&&(o=i)),o==i){var a=o?.01:1;null===e.min&&(i-=a),null===e.max&&(o+=a)}if("logarithmic"===e.scaling){0>i&&(i=o/e.base);var n=Math.log(o);e.base!=Math.E&&(n/=Math.log(e.base)),n=Math.ceil(n);var l=Math.log(i);e.base!=Math.E&&(l/=Math.log(e.base)),l=Math.ceil(l),t.tickSize=Flotr.getTickSize(e.noTicks,l,n,null===e.tickDecimals?0:e.tickDecimals),null===e.minorTickFreq&&(e.minorTickFreq=n-l>10?0:n-l>5?2:5)}else t.tickSize=Flotr.getTickSize(e.noTicks,i,o,e.tickDecimals);t.min=i,t.max=o,null===e.min&&e.autoscale&&(t.min-=t.tickSize*s,t.min<0&&t.datamin>=0&&(t.min=0),t.min=t.tickSize*Math.floor(t.min/t.tickSize)),null===e.max&&e.autoscale&&(t.max+=t.tickSize*s,t.max>0&&t.datamax<=0&&t.datamax!=t.datamin&&(t.max=0),t.max=t.tickSize*Math.ceil(t.max/t.tickSize)),t.min==t.max&&(t.max=t.min+1)}},calculateTextDimensions:function(t,e){var i,o,s="";if(this.options.showLabels)for(o=0;o<this.ticks.length;++o)i=this.ticks[o].label.length,i>s.length&&(s=this.ticks[o].label);this.maxLabel=t.dimensions(s,{size:e.fontSize,angle:Flotr.toRad(this.options.labelsAngle)},"font-size:smaller;","flotr-grid-label"),this.titleSize=t.dimensions(this.options.title,{size:1.2*e.fontSize,angle:Flotr.toRad(this.options.titleAngle)},"font-weight:bold;","flotr-axis-title")},_cleanUserTicks:function(t,e){var i,o,a,n,l=this,r=this.options;for(s.isFunction(t)&&(t=t({min:l.min,max:l.max})),o=0;o<t.length;++o)n=t[o],"object"==typeof n?(i=n[0],a=n.length>1?n[1]:r.tickFormatter(i,{min:l.min,max:l.max})):(i=n,a=r.tickFormatter(i,{min:this.min,max:this.max})),e[o]={v:i,label:a}},_calculateTimeTicks:function(){this.ticks=Flotr.Date.generator(this)},_calculateLogTicks:function(){var t,e,o=this,s=o.options,a=Math.log(o.max);s.base!=Math.E&&(a/=Math.log(s.base)),a=Math.ceil(a);var n=Math.log(o.min);for(s.base!=Math.E&&(n/=Math.log(s.base)),n=Math.ceil(n),i=n;a>i;i+=o.tickSize){e=s.base==Math.E?Math.exp(i):Math.pow(s.base,i);var l=e*(s.base==Math.E?Math.exp(o.tickSize):Math.pow(s.base,o.tickSize)),r=(l-e)/s.minorTickFreq;for(o.ticks.push({v:e,label:s.tickFormatter(e,{min:o.min,max:o.max})}),t=e+r;l>t;t+=r)o.minorTicks.push({v:t,label:s.tickFormatter(t,{min:o.min,max:o.max})})}e=s.base==Math.E?Math.exp(i):Math.pow(s.base,i),o.ticks.push({v:e,label:s.tickFormatter(e,{min:o.min,max:o.max})})},_calculateTicks:function(){var t,e,i,o,s,a,n=this,l=n.options,r=n.tickSize,h=n.min,c=n.max,d=r*Math.ceil(h/r);for(l.minorTickFreq&&(e=r/l.minorTickFreq),s=0;(i=o=d+s*r)<=c;++s)if(t=l.tickDecimals,null===t&&(t=1-Math.floor(Math.log(r)/Math.LN10)),0>t&&(t=0),i=i.toFixed(t),n.ticks.push({v:i,label:l.tickFormatter(i,{min:n.min,max:n.max})}),l.minorTickFreq)for(a=0;a<l.minorTickFreq&&c>s*r+a*e;++a)i=o+a*e,n.minorTicks.push({v:i,label:l.tickFormatter(i,{min:n.min,max:n.max})})}},s.extend(t,{getAxes:function(e){return{x:new t({options:e.xaxis,n:1,length:this.plotWidth}),x2:new t({options:e.x2axis,n:2,length:this.plotWidth}),y:new t({options:e.yaxis,n:1,length:this.plotHeight,offset:this.plotHeight,orientation:-1}),y2:new t({options:e.y2axis,n:2,length:this.plotHeight,offset:this.plotHeight,orientation:-1})}}}),Flotr.Axis=t}(),function(){function t(t){e.extend(this,t)}var e=Flotr._;t.prototype={getRange:function(){var t,e,i,o=this.data,s=o.length,a=Number.MAX_VALUE,n=Number.MAX_VALUE,l=-Number.MAX_VALUE,r=-Number.MAX_VALUE,h=!1,c=!1;if(0>s||this.hide)return!1;for(i=0;s>i;i++)t=o[i][0],e=o[i][1],null!==t&&(a>t&&(a=t,h=!0),t>l&&(l=t,h=!0)),null!==e&&(n>e&&(n=e,c=!0),e>r&&(r=e,c=!0));return{xmin:a,xmax:l,ymin:n,ymax:r,xused:h,yused:c}}},e.extend(t,{getSeries:function(i){return e.map(i,function(i){var o;return i.data?(o=new t,e.extend(o,i)):o=new t({data:i}),o})}}),Flotr.Series=t}(),Flotr.addType("lines",{options:{show:!1,lineWidth:2,fill:!1,fillBorder:!1,fillColor:null,fillOpacity:.4,steps:!1,stacked:!1},stack:{values:[]},draw:function(t){var e,i=t.context,o=t.lineWidth,s=t.shadowSize;i.save(),i.lineJoin="round",s&&(i.lineWidth=s/2,e=o/2+i.lineWidth/2,i.strokeStyle="rgba(0,0,0,0.1)",this.plot(t,e+s/2,!1),i.strokeStyle="rgba(0,0,0,0.2)",this.plot(t,e,!1)),i.lineWidth=o,i.strokeStyle=t.color,this.plot(t,0,!0),i.restore()},plot:function(t,e,i){function o(){!e&&t.fill&&k&&(s=p(k[0]),d.fillStyle=t.fillStyle,d.lineTo(a,M),d.lineTo(s,M),d.lineTo(s,g(k[1])),d.fill(),t.fillBorder&&d.stroke())}var s,a,n,l,r,h,c,d=t.context,f=t.width,u=t.height,p=t.xScale,g=t.yScale,x=t.data,m=t.stacked?this.stack:!1,v=x.length-1,b=null,y=null,M=g(0),k=null;if(!(1>v)){for(d.beginPath(),c=0;v>c;++c)null!==x[c][1]&&null!==x[c+1][1]?(s=p(x[c][0]),a=p(x[c+1][0]),null===k&&(k=x[c]),m?(r=m.values[x[c][0]]||0,h=m.values[x[c+1][0]]||m.values[x[c][0]]||0,n=g(x[c][1]+r),l=g(x[c+1][1]+h),i&&(x[c].y0=r,m.values[x[c][0]]=x[c][1]+r,c==v-1&&(x[c+1].y0=h,m.values[x[c+1][0]]=x[c+1][1]+h))):(n=g(x[c][1]),l=g(x[c+1][1])),n>u&&l>u||0>n&&0>l||0>s&&0>a||s>f&&a>f||((b!=s||y!=n+e)&&d.moveTo(s,n+e),b=a,y=l+e,t.steps?(d.lineTo(b+e/2,n+e),d.lineTo(b+e/2,y)):d.lineTo(b,y))):t.fill&&c>0&&null!==x[c][1]&&(d.stroke(),o(),k=null,d.closePath(),d.beginPath());
(!t.fill||t.fill&&!t.fillBorder)&&d.stroke(),o(),d.closePath()}},extendYRange:function(t,e,i,o){var s=t.options;if(i.stacked&&(!s.max&&0!==s.max||!s.min&&0!==s.min)){var a,n,l=t.max,r=t.min,h=o.positiveSums||{},c=o.negativeSums||{};for(n=0;n<e.length;n++)a=e[n][0]+"",e[n][1]>0?(h[a]=(h[a]||0)+e[n][1],l=Math.max(l,h[a])):(c[a]=(c[a]||0)+e[n][1],r=Math.min(r,c[a]));o.negativeSums=c,o.positiveSums=h,t.max=l,t.min=r}i.steps&&(this.hit=function(t){var e,i=t.data,o=t.args,s=t.yScale,a=o[0],n=i.length,l=o[1],r=t.xInverse(a.relX),h=a.relY;for(e=0;n-1>e;e++)if(r>=i[e][0]&&r<=i[e+1][0]){Math.abs(s(i[e][1])-h)<8&&(l.x=i[e][0],l.y=i[e][1],l.index=e,l.seriesIndex=t.index);break}},this.drawHit=function(t){var e,i=t.context,o=t.args,s=t.data,a=t.xScale,n=o.index,l=a(o.x),r=t.yScale(o.y);s.length-1>n&&(e=t.xScale(s[n+1][0]),i.save(),i.strokeStyle=t.color,i.lineWidth=t.lineWidth,i.beginPath(),i.moveTo(l,r),i.lineTo(e,r),i.stroke(),i.closePath(),i.restore())},this.clearHit=function(t){var e,i=t.context,o=t.args,s=t.data,a=t.xScale,n=t.lineWidth,l=o.index,r=a(o.x),h=t.yScale(o.y);s.length-1>l&&(e=t.xScale(s[l+1][0]),i.clearRect(r-n,h-n,e-r+2*n,2*n))})}}),Flotr.addType("bars",{options:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,fillOpacity:.4,horizontal:!1,stacked:!1,centered:!0,topPadding:.1,grouped:!1},stack:{positive:[],negative:[],_positive:[],_negative:[]},draw:function(t){var e=t.context;this.current+=1,e.save(),e.lineJoin="miter",e.lineWidth=t.lineWidth,e.strokeStyle=t.color,t.fill&&(e.fillStyle=t.fillStyle),this.plot(t),e.restore()},plot:function(t){var e,i,o,s,a,n,l=t.data,r=t.context,h=t.shadowSize;if(!(l.length<1))for(this.translate(r,t.horizontal),e=0;e<l.length;e++)i=this.getBarGeometry(l[e][0],l[e][1],t),null!==i&&(o=i.left,s=i.top,a=i.width,n=i.height,t.fill&&r.fillRect(o,s,a,n),h&&(r.save(),r.fillStyle="rgba(0,0,0,0.05)",r.fillRect(o+h,s+h,a,n),r.restore()),t.lineWidth&&r.strokeRect(o,s,a,n))},translate:function(t,e){e&&(t.rotate(-Math.PI/2),t.scale(-1,1))},getBarGeometry:function(t,e,i){var o,s,a,n,l,r=i.horizontal,h=i.barWidth,c=i.centered,d=i.stacked?this.stack:!1,f=i.lineWidth,u=c?h/2:0,p=r?i.yScale:i.xScale,g=r?i.xScale:i.yScale,x=r?e:t,m=r?t:e,v=0;return i.grouped&&(this.current/this.groups,x-=u,h/=this.groups,u=h/2,x=x+h*this.current-u),d&&(o=m>0?d.positive:d.negative,v=o[x]||v,o[x]=v+m),s=p(x-u),a=p(x+h-u),n=g(m+v),l=g(v),0>l&&(l=0),null===t||null===e?null:{x:x,y:m,xScale:p,yScale:g,top:n,left:Math.min(s,a)-f/2,width:Math.abs(a-s)-f,height:l-n}},hit:function(t){var e,i,o=t.data,s=t.args,a=s[0],n=s[1],l=t.xInverse(a.relX),r=t.yInverse(a.relY),h=this.getBarGeometry(l,r,t),c=h.width/2,d=h.left,f=h.y;for(i=o.length;i--;)e=this.getBarGeometry(o[i][0],o[i][1],t),(f>0&&f<e.y||0>f&&f>e.y)&&Math.abs(d-e.left)<c&&(n.x=o[i][0],n.y=o[i][1],n.index=i,n.seriesIndex=t.index)},drawHit:function(t){var e=t.context,i=t.args,o=this.getBarGeometry(i.x,i.y,t),s=o.left,a=o.top,n=o.width,l=o.height;e.save(),e.strokeStyle=t.color,e.lineWidth=t.lineWidth,this.translate(e,t.horizontal),e.beginPath(),e.moveTo(s,a+l),e.lineTo(s,a),e.lineTo(s+n,a),e.lineTo(s+n,a+l),t.fill&&(e.fillStyle=t.fillStyle,e.fill()),e.stroke(),e.closePath(),e.restore()},clearHit:function(t){var e=t.context,i=t.args,o=this.getBarGeometry(i.x,i.y,t),s=o.left,a=o.width,n=o.top,l=o.height,r=2*t.lineWidth;e.save(),this.translate(e,t.horizontal),e.clearRect(s-r,Math.min(n,n+l)-r,a+2*r,Math.abs(l)+2*r),e.restore()},extendXRange:function(t,e,i,o){this._extendRange(t,e,i,o),this.groups=this.groups+1||1,this.current=0},extendYRange:function(t,e,i,o){this._extendRange(t,e,i,o)},_extendRange:function(t,e,i){var o=t.options.max;if(!_.isNumber(o)&&!_.isString(o)){var s,a,n,l=t.min,r=t.max,h=i.horizontal,c=t.orientation,d=this.positiveSums||{},f=this.negativeSums||{};if((1==c&&!h||-1==c&&h)&&i.centered&&(r=Math.max(t.datamax+i.barWidth,r),l=Math.min(t.datamin-i.barWidth,l)),i.stacked&&(1==c&&h||-1==c&&!h))for(n=e.length;n--;)s=e[n][1==c?1:0]+"",a=e[n][1==c?0:1],a>0?(d[s]=(d[s]||0)+a,r=Math.max(r,d[s])):(f[s]=(f[s]||0)+a,l=Math.min(l,f[s]));(1==c&&h||-1==c&&!h)&&i.topPadding&&(t.max===t.datamax||i.stacked&&this.stackMax!==r)&&(r+=i.topPadding*(r-l)),this.stackMin=l,this.stackMax=r,this.negativeSums=f,this.positiveSums=d,t.max=r,t.min=l}}}),Flotr.addType("bubbles",{options:{show:!1,lineWidth:2,fill:!0,fillOpacity:.4,baseRadius:2},draw:function(t){var e=t.context,i=t.shadowSize;e.save(),e.lineWidth=t.lineWidth,e.fillStyle="rgba(0,0,0,0.05)",e.strokeStyle="rgba(0,0,0,0.05)",this.plot(t,i/2),e.strokeStyle="rgba(0,0,0,0.1)",this.plot(t,i/4),e.strokeStyle=t.color,e.fillStyle=t.fillStyle,this.plot(t),e.restore()},plot:function(t,e){var i,o,s=t.data,a=t.context;for(e=e||0,o=0;o<s.length;++o)i=this.getGeometry(s[o],t),a.beginPath(),a.arc(i.x+e,i.y+e,i.z,0,2*Math.PI,!0),a.stroke(),t.fill&&a.fill(),a.closePath()},getGeometry:function(t,e){return{x:e.xScale(t[0]),y:e.yScale(t[1]),z:t[2]*e.baseRadius}},hit:function(t){var e,o,s,a,n=t.data,l=t.args,r=l[0],h=l[1],c=r.relX,d=r.relY;for(h.best=h.best||Number.MAX_VALUE,i=n.length;i--;)o=this.getGeometry(n[i],t),s=o.x-c,a=o.y-d,e=Math.sqrt(s*s+a*a),e<o.z&&o.z<h.best&&(h.x=n[i][0],h.y=n[i][1],h.index=i,h.seriesIndex=t.index,h.best=o.z)},drawHit:function(t){var e=t.context,i=this.getGeometry(t.data[t.args.index],t);e.save(),e.lineWidth=t.lineWidth,e.fillStyle=t.fillStyle,e.strokeStyle=t.color,e.beginPath(),e.arc(i.x,i.y,i.z,0,2*Math.PI,!0),e.fill(),e.stroke(),e.closePath(),e.restore()},clearHit:function(t){var e=t.context,i=this.getGeometry(t.data[t.args.index],t),o=i.z+t.lineWidth;e.save(),e.clearRect(i.x-o,i.y-o,2*o,2*o),e.restore()}}),Flotr.addType("candles",{options:{show:!1,lineWidth:1,wickLineWidth:1,candleWidth:.6,fill:!0,upFillColor:"#00A8F0",downFillColor:"#CB4B4B",fillOpacity:.5,barcharts:!1},draw:function(t){var e=t.context;e.save(),e.lineJoin="miter",e.lineCap="butt",e.lineWidth=t.wickLineWidth||t.lineWidth,this.plot(t),e.restore()},plot:function(t){var e,i,o,s,a,n,l,r,h,c,d,f,u,p,g,x=t.data,m=t.context,v=t.xScale,b=t.yScale,y=t.candleWidth/2,M=t.shadowSize,k=t.lineWidth,w=t.wickLineWidth,S=w%2/2;if(!(x.length<1))for(g=0;g<x.length;g++)i=x[g],o=i[0],s=i[1],a=i[2],n=i[3],l=i[4],r=v(o-y),h=v(o+y),c=b(n),d=b(a),f=b(Math.min(s,l)),u=b(Math.max(s,l)),e=t[s>l?"downFillColor":"upFillColor"],t.fill&&!t.barcharts&&(m.fillStyle="rgba(0,0,0,0.05)",m.fillRect(r+M,u+M,h-r,f-u),m.save(),m.globalAlpha=t.fillOpacity,m.fillStyle=e,m.fillRect(r,u+k,h-r,f-u),m.restore()),(k||w)&&(o=Math.floor((r+h)/2)+S,m.strokeStyle=e,m.beginPath(),t.barcharts?(m.moveTo(o,Math.floor(d+k)),m.lineTo(o,Math.floor(c+k)),p=l>s,m.moveTo(p?h:r,Math.floor(u+k)),m.lineTo(o,Math.floor(u+k)),m.moveTo(o,Math.floor(f+k)),m.lineTo(p?r:h,Math.floor(f+k))):(m.strokeRect(r,u+k,h-r,f-u),m.moveTo(o,Math.floor(u+k)),m.lineTo(o,Math.floor(d+k)),m.moveTo(o,Math.floor(f+k)),m.lineTo(o,Math.floor(c+k))),m.closePath(),m.stroke())},hit:function(t){var e,i,o,s,a,n,l,r,h=t.xScale,c=t.yScale,d=t.data,f=t.args,u=f[0],p=t.candleWidth/2,g=f[1],x=u.relX,m=u.relY,v=d.length;for(e=0;v>e;e++)if(i=d[e],o=i[2],s=i[3],a=h(i[0]-p),n=h(i[0]+p),r=c(s),l=c(o),x>a&&n>x&&m>l&&r>m)return g.x=i[0],g.index=e,void(g.seriesIndex=t.index)},drawHit:function(t){var e=t.context;e.save(),this.plot(_.defaults({fill:!!t.fillColor,upFillColor:t.color,downFillColor:t.color,data:[t.data[t.args.index]]},t)),e.restore()},clearHit:function(t){var e=t.args,i=t.context,o=t.xScale,s=t.yScale,a=t.lineWidth,n=t.candleWidth/2,l=t.data[e.index],r=o(l[0]-n)-a,h=o(l[0]+n)+a,c=s(l[2]),d=s(l[3])+a;i.clearRect(r,c,h-r,d-c)},extendXRange:function(t){null===t.options.max&&(t.max=Math.max(t.datamax+.5,t.max),t.min=Math.min(t.datamin-.5,t.min))}}),Flotr.addType("gantt",{options:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,fillOpacity:.4,centered:!0},draw:function(t){var e=this.ctx,i=t.gantt.barWidth,o=Math.min(t.gantt.lineWidth,i);if(e.save(),e.translate(this.plotOffset.left,this.plotOffset.top),e.lineJoin="miter",e.lineWidth=o,e.strokeStyle=t.color,e.save(),this.gantt.plotShadows(t,i,0,t.gantt.fill),e.restore(),t.gantt.fill){var s=t.gantt.fillColor||t.color;e.fillStyle=this.processColor(s,{opacity:t.gantt.fillOpacity})}this.gantt.plot(t,i,0,t.gantt.fill),e.restore()},plot:function(t,e,i,o){var s=t.data;if(!(s.length<1)){var a,n=t.xaxis,l=t.yaxis,r=this.ctx;for(a=0;a<s.length;a++){var h=s[a][0],c=s[a][1],d=s[a][2],f=!0,u=!0,p=!0;if(null!==c&&null!==d){var g=c,x=c+d,m=h-(t.gantt.centered?e/2:0),v=h+e-(t.gantt.centered?e/2:0);x<n.min||g>n.max||v<l.min||m>l.max||(g<n.min&&(g=n.min,f=!1),x>n.max&&(x=n.max,n.lastSerie!=t&&(u=!1)),m<l.min&&(m=l.min),v>l.max&&(v=l.max,l.lastSerie!=t&&(u=!1)),o&&(r.beginPath(),r.moveTo(n.d2p(g),l.d2p(m)+i),r.lineTo(n.d2p(g),l.d2p(v)+i),r.lineTo(n.d2p(x),l.d2p(v)+i),r.lineTo(n.d2p(x),l.d2p(m)+i),r.fill(),r.closePath()),t.gantt.lineWidth&&(f||p||u)&&(r.beginPath(),r.moveTo(n.d2p(g),l.d2p(m)+i),r[f?"lineTo":"moveTo"](n.d2p(g),l.d2p(v)+i),r[u?"lineTo":"moveTo"](n.d2p(x),l.d2p(v)+i),r[p?"lineTo":"moveTo"](n.d2p(x),l.d2p(m)+i),r.stroke(),r.closePath()))}}}},plotShadows:function(t,e){var i=t.data;if(!(i.length<1)){var o,s,a,n,l=t.xaxis,r=t.yaxis,h=this.ctx,c=this.options.shadowSize;for(o=0;o<i.length;o++)if(s=i[o][0],a=i[o][1],n=i[o][2],null!==a&&null!==n){var d=a,f=a+n,u=s-(t.gantt.centered?e/2:0),p=s+e-(t.gantt.centered?e/2:0);if(!(f<l.min||d>l.max||p<r.min||u>r.max)){d<l.min&&(d=l.min),f>l.max&&(f=l.max),u<r.min&&(u=r.min),p>r.max&&(p=r.max);var g=l.d2p(f)-l.d2p(d)-(l.d2p(f)+c<=this.plotWidth?0:c),x=r.d2p(u)-r.d2p(p)-(r.d2p(u)+c<=this.plotHeight?0:c);h.fillStyle="rgba(0,0,0,0.05)",h.fillRect(Math.min(l.d2p(d)+c,this.plotWidth),Math.min(r.d2p(p)+c,this.plotHeight),g,x)}}}},extendXRange:function(t){if(null===t.options.max){var e,i,o,s,a=t.min,n=t.max,l={},r=null;for(e=0;e<this.series.length;++e)if(o=this.series[e],s=o.gantt,s.show&&o.xaxis==t){for(i=0;i<o.data.length;i++)s.show&&(y=o.data[i][0]+"",l[y]=Math.max(l[y]||0,o.data[i][1]+o.data[i][2]),r=o);for(i in l)n=Math.max(l[i],n)}t.lastSerie=r,t.max=n,t.min=a}},extendYRange:function(t){if(null===t.options.max){var e,i,o,s,a=Number.MIN_VALUE,n=Number.MAX_VALUE,l=null;for(e=0;e<this.series.length;++e)if(o=this.series[e],s=o.gantt,s.show&&!o.hide&&o.yaxis==t){var r=Number.MIN_VALUE,h=Number.MAX_VALUE;for(i=0;i<o.data.length;i++)r=Math.max(r,o.data[i][0]),h=Math.min(h,o.data[i][0]);s.centered?(a=Math.max(r+.5,a),n=Math.min(h-.5,n)):(a=Math.max(r+1,a),n=Math.min(h,n)),s.barWidth+r>a&&(a=t.max+s.barWidth)}t.lastSerie=l,t.max=a,t.min=n,t.tickSize=Flotr.getTickSize(t.options.noTicks,n,a,t.options.tickDecimals)}}}),function(){function t(t){return"object"==typeof t&&t.constructor&&(Image?!0:t.constructor===Image)}Flotr.defaultMarkerFormatter=function(t){return Math.round(100*t.y)/100+""},Flotr.addType("markers",{options:{show:!1,lineWidth:1,color:"#000000",fill:!1,fillColor:"#FFFFFF",fillOpacity:.4,stroke:!1,position:"ct",verticalMargin:0,labelFormatter:Flotr.defaultMarkerFormatter,fontSize:Flotr.defaultOptions.fontSize,stacked:!1,stackingType:"b",horizontal:!1},stack:{positive:[],negative:[],values:[]},draw:function(t){function e(t,e){return o=d.negative[t]||0,i=d.positive[t]||0,e>0?(d.positive[t]=o+e,o+e):(d.negative[t]=i+e,i+e)}var i,o,s,a,n,l,r,h=t.data,c=t.context,d=t.stacked?t.stack:!1,f=t.stackingType;for(c.save(),c.lineJoin="round",c.lineWidth=t.lineWidth,c.strokeStyle="rgba(0,0,0,0.5)",c.fillStyle=t.fillStyle,a=0;a<h.length;++a)n=h[a][0],l=h[a][1],d&&("b"==f?t.horizontal?l=e(l,n):n=e(n,l):"a"==f&&(s=d.values[n]||0,d.values[n]=s+l,l=s+l)),r=t.labelFormatter({x:n,y:l,index:a,data:h}),this.plot(t.xScale(n),t.yScale(l),r,t);c.restore()},plot:function(e,i,o,s){s.context;if(t(o)&&!o.complete)throw"Marker image not loaded.";this._plot(e,i,o,s)},_plot:function(e,i,o,s){var a,n=s.context,l=2,r=e,h=i;a=t(o)?{height:o.height,width:o.width}:s.text.canvas(o),a.width=Math.floor(a.width+2*l),a.height=Math.floor(a.height+2*l),-1!=s.position.indexOf("c")?r-=a.width/2+l:-1!=s.position.indexOf("l")&&(r-=a.width),-1!=s.position.indexOf("m")?h-=a.height/2+l:-1!=s.position.indexOf("t")?h-=a.height+s.verticalMargin:h+=s.verticalMargin,r=Math.floor(r)+.5,h=Math.floor(h)+.5,s.fill&&n.fillRect(r,h,a.width,a.height),s.stroke&&n.strokeRect(r,h,a.width,a.height),t(o)?n.drawImage(o,parseInt(r+l,10),parseInt(h+l,10)):Flotr.drawText(n,o,r+l,h+l,{textBaseline:"top",textAlign:"left",size:s.fontSize,color:s.color})}})}(),function(){Flotr._;Flotr.defaultPieLabelFormatter=function(t,e){return(100*e/t).toFixed(2)+"%"},Flotr.addType("pie",{options:{show:!1,lineWidth:1,fill:!0,fillColor:null,fillOpacity:.6,explode:6,sizeRatio:.6,startAngle:Math.PI/4,labelFormatter:Flotr.defaultPieLabelFormatter,pie3D:!1,pie3DviewAngle:Math.PI/2*.8,pie3DspliceThickness:20,epsilon:.1},draw:function(t){var e,i,o,s=t.data,a=t.context,n=t.lineWidth,l=t.shadowSize,r=t.sizeRatio,h=t.height,c=t.width,d=t.explode,f=t.color,u=t.fill,p=t.fillStyle,g=Math.min(c,h)*r/2,x=s[0][1],m=[],v=1,b=2*Math.PI*x/this.total,y=this.startAngle||2*Math.PI*t.startAngle,M=y+b,k=y+b/2,w=t.labelFormatter(this.total,x),S=d+g+4,T=Math.cos(k)*S,F=Math.sin(k)*S,A=0>T?"right":"left",C=F>0?"top":"bottom";if(a.save(),a.translate(c/2,h/2),a.scale(1,v),i=Math.cos(k)*d,o=Math.sin(k)*d,l>0&&(this.plotSlice(i+l,o+l,g,y,M,a),u&&(a.fillStyle="rgba(0,0,0,0.1)",a.fill())),this.plotSlice(i,o,g,y,M,a),u&&(a.fillStyle=p,a.fill()),a.lineWidth=n,a.strokeStyle=f,a.stroke(),e={size:1.2*t.fontSize,color:t.fontColor,weight:1.5},w&&(t.htmlText||!t.textEnabled?(divStyle="position:absolute;"+C+":"+(h/2+("top"===C?F:-F))+"px;",divStyle+=A+":"+(c/2+("right"===A?-T:T))+"px;",m.push('<div style="',divStyle,'" class="flotr-grid-label">',w,"</div>")):(e.textAlign=A,e.textBaseline=C,Flotr.drawText(a,w,T,F,e))),t.htmlText||!t.textEnabled){var W=Flotr.DOM.node('<div style="color:'+t.fontColor+'" class="flotr-labels"></div>');Flotr.DOM.insert(W,m.join("")),Flotr.DOM.insert(t.element,W)}a.restore(),this.startAngle=M,this.slices=this.slices||[],this.slices.push({radius:g,x:i,y:o,explode:d,start:y,end:M})},plotSlice:function(t,e,i,o,s,a){a.beginPath(),a.moveTo(t,e),a.arc(t,e,i,o,s,!1),a.lineTo(t,e),a.closePath()},hit:function(t){var e=t.data[0],i=t.args,o=t.index,s=i[0],a=i[1],n=this.slices[o],l=s.relX-t.width/2,r=s.relY-t.height/2,h=Math.sqrt(l*l+r*r),c=Math.atan(r/l),d=2*Math.PI,f=n.explode||t.explode,u=n.start%d,p=n.end%d,g=t.epsilon;0>l?c+=Math.PI:l>0&&0>r&&(c+=d),h<n.radius+f&&h>f&&(c>u&&p>c||u>p&&(p>c||c>u)||u===p&&(n.start===n.end&&Math.abs(c-u)<g||n.start!==n.end&&Math.abs(c-u)>g))&&(a.x=e[0],a.y=e[1],a.sAngle=u,a.eAngle=p,a.index=0,a.seriesIndex=o,a.fraction=e[1]/this.total)},drawHit:function(t){var e=t.context,i=this.slices[t.args.seriesIndex];e.save(),e.translate(t.width/2,t.height/2),this.plotSlice(i.x,i.y,i.radius,i.start,i.end,e),e.stroke(),e.restore()},clearHit:function(t){var e=t.context,i=this.slices[t.args.seriesIndex],o=2*t.lineWidth,s=i.radius+o;e.save(),e.translate(t.width/2,t.height/2),e.clearRect(i.x-s,i.y-s,2*s+o,2*s+o),e.restore()},extendYRange:function(t,e){this.total=(this.total||0)+e[0][1]}})}(),Flotr.addType("points",{options:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#FFFFFF",fillOpacity:1,hitRadius:null},draw:function(t){var e=t.context,i=(t.lineWidth,t.shadowSize);e.save(),i>0&&(e.lineWidth=i/2,e.strokeStyle="rgba(0,0,0,0.1)",this.plot(t,i/2+e.lineWidth/2),e.strokeStyle="rgba(0,0,0,0.2)",this.plot(t,e.lineWidth/2)),e.lineWidth=t.lineWidth,e.strokeStyle=t.color,t.fill&&(e.fillStyle=t.fillStyle),this.plot(t),e.restore()},plot:function(t,e){var i,o,s,a=t.data,n=t.context,l=t.xScale,r=t.yScale;for(i=a.length-1;i>-1;--i)s=a[i][1],null!==s&&(o=l(a[i][0]),s=r(s),0>o||o>t.width||0>s||s>t.height||(n.beginPath(),e?n.arc(o,s+e,t.radius,0,Math.PI,!1):(n.arc(o,s,t.radius,0,2*Math.PI,!0),t.fill&&n.fill()),n.stroke(),n.closePath()))}}),Flotr.addType("radar",{options:{show:!1,lineWidth:2,fill:!0,fillOpacity:.4,radiusRatio:.9,sensibility:2},draw:function(t){var e=t.context,i=t.shadowSize;e.save(),e.translate(t.width/2,t.height/2),e.lineWidth=t.lineWidth,e.fillStyle="rgba(0,0,0,0.05)",e.strokeStyle="rgba(0,0,0,0.05)",this.plot(t,i/2),e.strokeStyle="rgba(0,0,0,0.1)",this.plot(t,i/4),e.strokeStyle=t.color,e.fillStyle=t.fillStyle,this.plot(t),e.restore()},plot:function(t,e){var i,o,s=t.data,a=t.context,n=Math.min(t.height,t.width)*t.radiusRatio/2,l=2*Math.PI/s.length,r=-Math.PI/2;for(e=e||0,a.beginPath(),i=0;i<s.length;++i)o=s[i][1]/this.max,a[0===i?"moveTo":"lineTo"](Math.cos(i*l+r)*n*o+e,Math.sin(i*l+r)*n*o+e);a.closePath(),t.fill&&a.fill(),a.stroke()},getGeometry:function(t,e){var i=Math.min(e.height,e.width)*e.radiusRatio/2,o=2*Math.PI/e.data.length,s=-Math.PI/2,a=t[1]/this.max;return{x:Math.cos(t[0]*o+s)*i*a+e.width/2,y:Math.sin(t[0]*o+s)*i*a+e.height/2}},hit:function(t){for(var e,i,o,s,a=t.args,n=a[0],l=a[1],r=n.relX,h=n.relY,c=0;c<l.series.length;c++)for(var d=l.series[c],f=d.data,u=f.length;u--;)if(i=this.getGeometry(f[u],t),o=i.x-r,s=i.y-h,e=Math.sqrt(o*o+s*s),e<2*t.sensibility)return l.x=f[u][0],l.y=f[u][1],l.index=u,l.seriesIndex=c,l},drawHit:function(t){var e=2*Math.PI/t.data.length,i=-Math.PI/2,o=Math.min(t.height,t.width)*t.radiusRatio/2,s=t.args.series,a=s.points.hitRadius||s.points.radius||s.mouse.radius,n=t.context;n.translate(t.width/2,t.height/2);var l=t.args.index,r=t.data[l][1]/this.max,h=Math.cos(l*e+i)*o*r,c=Math.sin(l*e+i)*o*r;n.beginPath(),n.arc(h,c,a,0,2*Math.PI,!0),n.closePath(),n.stroke()},clearHit:function(t){var e=2*Math.PI/t.data.length,i=-Math.PI/2,o=Math.min(t.height,t.width)*t.radiusRatio/2,s=t.context,a=t.args.series,n=a.points?a.points.lineWidth:1;offset=(a.points.hitRadius||a.points.radius||a.mouse.radius)+n,s.translate(t.width/2,t.height/2);var l=t.args.index,r=t.data[l][1]/this.max,h=Math.cos(l*e+i)*o*r,c=Math.sin(l*e+i)*o*r;s.clearRect(h-offset,c-offset,2*offset,2*offset)},extendYRange:function(t){this.max=Math.max(t.max,this.max||-Number.MAX_VALUE)}}),Flotr.addType("timeline",{options:{show:!1,lineWidth:1,barWidth:.2,fill:!0,fillColor:null,fillOpacity:.4,centered:!0},draw:function(t){var e=t.context;e.save(),e.lineJoin="miter",e.lineWidth=t.lineWidth,e.strokeStyle=t.color,e.fillStyle=t.fillStyle,this.plot(t),e.restore()},plot:function(t){var e=t.data,i=t.context,o=t.xScale,s=t.yScale,a=t.barWidth,n=t.lineWidth;Flotr._.each(e,function(t){var e=t[0],l=t[1],r=t[2],h=a,c=Math.ceil(o(e)),d=Math.ceil(o(e+r))-c,f=Math.round(s(l)),u=Math.round(s(l-h))-f,p=c-n/2,g=Math.round(f-u/2)-n/2;i.strokeRect(p,g,d,u),i.fillRect(p,g,d,u)})},extendRange:function(t){var e=t.data,i=t.xaxis,o=t.yaxis,s=t.timeline.barWidth;if(null===i.options.min&&(i.min=i.datamin-s/2),null===i.options.max){var a=i.max;Flotr._.each(e,function(t){a=Math.max(a,t[0]+t[2])},this),i.max=a+s/2}null===o.options.min&&(o.min=o.datamin-s),null===o.options.min&&(o.max=o.datamax+s)}}),function(){var t=Flotr.DOM;Flotr.addPlugin("crosshair",{options:{mode:null,color:"#FF0000",hideCursor:!0},callbacks:{"flotr:mousemove":function(t,e){this.options.crosshair.mode&&(this.crosshair.clearCrosshair(),this.crosshair.drawCrosshair(e))}},drawCrosshair:function(e){var i=this.octx,o=this.options.crosshair,s=this.plotOffset,a=s.left+Math.round(e.relX)+.5,n=s.top+Math.round(e.relY)+.5;return e.relX<0||e.relY<0||e.relX>this.plotWidth||e.relY>this.plotHeight?(this.el.style.cursor=null,void t.removeClass(this.el,"flotr-crosshair")):(o.hideCursor&&(this.el.style.cursor="none",t.addClass(this.el,"flotr-crosshair")),i.save(),i.strokeStyle=o.color,i.lineWidth=1,i.beginPath(),-1!=o.mode.indexOf("x")&&(i.moveTo(a,s.top),i.lineTo(a,s.top+this.plotHeight)),-1!=o.mode.indexOf("y")&&(i.moveTo(s.left,n),i.lineTo(s.left+this.plotWidth,n)),i.stroke(),void i.restore())},clearCrosshair:function(){var t=this.plotOffset,e=this.lastMousePos,i=this.octx;e&&(i.clearRect(Math.round(e.relX)+t.left,t.top,1,this.plotHeight+1),i.clearRect(t.left,Math.round(e.relY)+t.top,this.plotWidth+1,1))}})}(),function(){function t(t,e,i,o,s,a){var n="image/"+t,l=i.getImageData(0,0,o,s),r=new Image;return i.save(),i.globalCompositeOperation="destination-over",i.fillStyle=a,i.fillRect(0,0,o,s),r.src=e.toDataURL(n),i.restore(),i.clearRect(0,0,o,s),i.putImageData(l,0,0),r}var e=Flotr.DOM,i=Flotr._;Flotr.addPlugin("download",{saveImage:function(o,s,a,n){var l,r=this.options.grid;if(Flotr.isIE&&Flotr.isIE<9)return l="<html><body>"+this.canvas.firstChild.innerHTML+"</body></html>",window.open().document.write(l);if("jpeg"===o||"png"===o)return l=t(o,this.canvas,this.ctx,this.canvasWidth,this.canvasHeight,r&&r.backgroundColor||"#ffffff"),i.isElement(l)&&n?(this.download.restoreCanvas(),e.hide(this.canvas),e.hide(this.overlay),e.setStyles({position:"absolute"}),e.insert(this.el,l),this.saveImageElement=l,void 0):window.open(l.src)},restoreCanvas:function(){e.show(this.canvas),e.show(this.overlay),this.saveImageElement&&this.el.removeChild(this.saveImageElement),this.saveImageElement=null}})}(),function(){var t=Flotr.EventAdapter,e=Flotr._;Flotr.addPlugin("graphGrid",{callbacks:{"flotr:beforedraw":function(){this.graphGrid.drawGrid()},"flotr:afterdraw":function(){this.graphGrid.drawOutline()}},drawGrid:function(){function i(t){for(l=0;l<t.length;++l){var e=t[l].v/n.max;for(r=0;b>=r;++r)h[0===r?"moveTo":"lineTo"](Math.cos(r*y+M)*v*e,Math.sin(r*y+M)*v*e)}}function o(t,i){e.each(e.pluck(t,"v"),function(t){t<=n.min||t>=n.max||(t==n.min||t==n.max)&&d.outlineWidth||i(Math.floor(n.d2p(t))+h.lineWidth/2)})}function s(t){h.moveTo(t,0),h.lineTo(t,x)}function a(t){h.moveTo(0,t),h.lineTo(m,t)}var n,l,r,h=this.ctx,c=this.options,d=c.grid,f=d.verticalLines,u=d.horizontalLines,p=d.minorVerticalLines,g=d.minorHorizontalLines,x=this.plotHeight,m=this.plotWidth;if((f||p||u||g)&&t.fire(this.el,"flotr:beforegrid",[this.axes.x,this.axes.y,c,this]),h.save(),h.lineWidth=1,h.strokeStyle=d.tickColor,d.circular){h.translate(this.plotOffset.left+m/2,this.plotOffset.top+x/2);var v=Math.min(x,m)*c.radar.radiusRatio/2,b=this.axes.x.ticks.length,y=2*(Math.PI/b),M=-Math.PI/2;h.beginPath(),n=this.axes.y,u&&i(n.ticks),g&&i(n.minorTicks),f&&e.times(b,function(t){h.moveTo(0,0),h.lineTo(Math.cos(t*y+M)*v,Math.sin(t*y+M)*v)}),h.stroke()}else h.translate(this.plotOffset.left,this.plotOffset.top),d.backgroundColor&&(h.fillStyle=this.processColor(d.backgroundColor,{x1:0,y1:0,x2:m,y2:x}),h.fillRect(0,0,m,x)),h.beginPath(),n=this.axes.x,f&&o(n.ticks,s),p&&o(n.minorTicks,s),n=this.axes.y,u&&o(n.ticks,a),g&&o(n.minorTicks,a),h.stroke();h.restore(),(f||p||u||g)&&t.fire(this.el,"flotr:aftergrid",[this.axes.x,this.axes.y,c,this])},drawOutline:function(){var t,e,o,s,a=this,n=a.options,l=n.grid,r=l.outline,h=a.ctx,c=l.backgroundImage,d=a.plotOffset,f=d.left,u=d.top,p=a.plotWidth,g=a.plotHeight;if(l.outlineWidth){if(h.save(),l.circular){h.translate(f+p/2,u+g/2);var x=Math.min(g,p)*n.radar.radiusRatio/2,m=this.axes.x.ticks.length,v=2*(Math.PI/m),b=-Math.PI/2;for(h.beginPath(),h.lineWidth=l.outlineWidth,h.strokeStyle=l.color,h.lineJoin="round",i=0;m>=i;++i)h[0===i?"moveTo":"lineTo"](Math.cos(i*v+b)*x,Math.sin(i*v+b)*x);h.stroke()}else{h.translate(f,u);var y=l.outlineWidth,M=.5-y+(y+1)%2/2,k="lineTo",w="moveTo";h.lineWidth=y,h.strokeStyle=l.color,h.lineJoin="miter",h.beginPath(),h.moveTo(M,M),p-=y/2%1,g+=y/2,h[-1!==r.indexOf("n")?k:w](p,M),h[-1!==r.indexOf("e")?k:w](p,g),h[-1!==r.indexOf("s")?k:w](M,g),h[-1!==r.indexOf("w")?k:w](M,M),h.stroke(),h.closePath()}h.restore(),c&&(e=c.src||c,o=(parseInt(c.left,10)||0)+d.left,s=(parseInt(c.top,10)||0)+d.top,t=new Image,t.onload=function(){h.save(),c.alpha&&(h.globalAlpha=c.alpha),h.globalCompositeOperation="destination-over",h.drawImage(t,0,0,t.width,t.height,o,s,p,g),h.restore()},t.src=e)}}})}(),function(){var t=Flotr.DOM,e=Flotr._,i=Flotr,o="opacity:0.7;background-color:#000;color:#fff;position:absolute;padding:2px 8px;-moz-border-radius:4px;border-radius:4px;white-space:nowrap;";Flotr.addPlugin("hit",{callbacks:{"flotr:mousemove":function(t,e){this.hit.track(e)},"flotr:click":function(t){var i=this.hit.track(t);i&&!e.isUndefined(i.index)&&(t.hit=i)},"flotr:mouseout":function(t){t.relatedTarget!==this.mouseTrack&&this.hit.clearHit()},"flotr:destroy":function(){this.options.mouse.container&&t.remove(this.mouseTrack),this.mouseTrack=null}},track:function(t){return this.options.mouse.track||e.any(this.series,function(t){return t.mouse&&t.mouse.track})?this.hit.hit(t):void 0},executeOnType:function(t,o,s){function a(t,a){e.each(e.keys(i.graphTypes),function(e){t[e]&&t[e].show&&!t.hide&&this[e][o]&&(n=this.getOptions(t,e),n.fill=!!t.mouse.fillColor,n.fillStyle=this.processColor(t.mouse.fillColor||"#ffffff",{opacity:t.mouse.fillOpacity}),n.color=t.mouse.lineColor,n.context=this.octx,n.index=a,s&&(n.args=s),this[e][o].call(this[e],n),l=!0)},this)}var n,l=!1;return e.isArray(t)||(t=[t]),e.each(t,a,this),l},drawHit:function(t){var e=this.octx,i=t.series;if(i.mouse.lineColor){if(e.save(),e.lineWidth=i.points?i.points.lineWidth:1,e.strokeStyle=i.mouse.lineColor,e.fillStyle=this.processColor(i.mouse.fillColor||"#ffffff",{opacity:i.mouse.fillOpacity}),e.translate(this.plotOffset.left,this.plotOffset.top),!this.hit.executeOnType(i,"drawHit",t)){var o=t.xaxis,s=t.yaxis;e.beginPath(),e.arc(o.d2p(t.x),s.d2p(t.y),i.points.hitRadius||i.points.radius||i.mouse.radius,0,2*Math.PI,!0),e.fill(),e.stroke(),e.closePath()}e.restore(),this.clip(e)}this.prevHit=t},clearHit:function(){var e=this.prevHit,i=this.octx,o=this.plotOffset;if(i.save(),i.translate(o.left,o.top),e){if(!this.hit.executeOnType(e.series,"clearHit",this.prevHit)){var s=e.series,a=s.points?s.points.lineWidth:1;offset=(s.points.hitRadius||s.points.radius||s.mouse.radius)+a,i.clearRect(e.xaxis.d2p(e.x)-offset,e.yaxis.d2p(e.y)-offset,2*offset,2*offset)}t.hide(this.mouseTrack),this.prevHit=null}i.restore()},hit:function(t){var i,o,s,a,n,l,r,h=this.options,c=this.prevHit;if(0!==this.series.length)return r={relX:t.relX,relY:t.relY,absX:t.absX,absY:t.absY,series:this.series},h.mouse.trackY&&!h.mouse.trackAll&&this.hit.executeOnType(this.series,"hit",[t,r])&&!e.isUndefined(r.seriesIndex)?(a=this.series[r.seriesIndex],r.series=a,r.mouse=a.mouse,r.xaxis=a.xaxis,r.yaxis=a.yaxis):(i=this.hit.closest(t),i&&(i=h.mouse.trackY?i.point:i.x,s=i.seriesIndex,a=this.series[s],n=a.xaxis,l=a.yaxis,o=2*a.mouse.sensibility,(h.mouse.trackAll||i.distanceX<o/n.scale&&(!h.mouse.trackY||i.distanceY<o/l.scale))&&(r.series=a,r.xaxis=a.xaxis,r.yaxis=a.yaxis,r.mouse=a.mouse,r.x=i.x,r.y=i.y,r.dist=i.distance,r.index=i.dataIndex,r.seriesIndex=s))),c&&c.index===r.index&&c.seriesIndex===r.seriesIndex||(this.hit.clearHit(),r.series&&r.mouse&&r.mouse.track&&(this.hit.drawMouseTrack(r),this.hit.drawHit(r),Flotr.EventAdapter.fire(this.el,"flotr:hit",[r,this]))),r},closest:function(t){function e(t){t.distance=s,t.distanceX=a,t.distanceY=n,t.seriesIndex=d,t.dataIndex=f,t.x=h,t.y=c,y=!0}var i,o,s,a,n,l,r,h,c,d,f,u=this.series,p=(this.options,t.relX),g=t.relY,x=Number.MAX_VALUE,m=Number.MAX_VALUE,v={},b={},y=!1;for(d=0;d<u.length;d++)if(i=u[d],o=i.data,l=i.xaxis.p2d(p),r=i.yaxis.p2d(g),!i.hide)for(f=o.length;f--;)h=o[f][0],c=o[f][1],o[f].y0&&(c+=o[f].y0),null!==h&&null!==c&&(h<i.xaxis.min||h>i.xaxis.max||(a=Math.abs(h-l),n=Math.abs(c-r),s=a*a+n*n,x>s&&(x=s,e(v)),m>a&&(m=a,e(b))));return y?{point:v,x:b}:!1},drawMouseTrack:function(i){var s,a,n,l="",r=i.series,h=i.mouse.position,c=i.mouse.margin,d=i.x,f=i.y,u=o,p=this.mouseTrack,g=this.plotOffset,x=g.left,m=(g.right,g.bottom,g.top),v=i.mouse.trackDecimals,b=this.options,y=b.mouse.container,M=0,k=0;if(p||(p=t.node('<div class="flotr-mouse-value" style="'+u+'"></div>'),this.mouseTrack=p,t.insert(y||this.el,p)),(!v||0>v)&&(v=0),d&&d.toFixed&&(d=d.toFixed(v)),f&&f.toFixed&&(f=f.toFixed(v)),n=i.mouse.trackFormatter({x:d,y:f,series:i.series,index:i.index,nearest:i,fraction:i.fraction}),e.isNull(n)||e.isUndefined(n))return void t.hide(p);if(p.innerHTML=n,t.show(p),h){if(a=t.size(p),y&&(s=t.position(this.el),M=s.top,k=s.left),i.mouse.relative)if(r.pie&&r.pie.show){var w={x:this.plotWidth/2,y:this.plotHeight/2},S=Math.min(this.canvasWidth,this.canvasHeight)*r.pie.sizeRatio/2,T=i.sAngle<i.eAngle?(i.sAngle+i.eAngle)/2:(i.sAngle+i.eAngle+2*Math.PI)/2;l+="bottom:"+(c-m-w.y-Math.sin(T)*S/2+this.canvasHeight)+"px;top:auto;",l+="left:"+(c+x+w.x+Math.cos(T)*S/2)+"px;right:auto;"}else l+="top:",l+=/n/.test(h)?M-c+m+i.yaxis.d2p(i.y)-a.height:M+c+m+i.yaxis.d2p(i.y),l+="px;bottom:auto;left:",l+=/w/.test(h)?k-c+x+i.xaxis.d2p(i.x)-a.width:k+c+x+i.xaxis.d2p(i.x),l+="px;right:auto;";else l+="top:","n"==h.charAt(0)?l+=M+c+m:"s"==h.charAt(0)&&(l+=M-c+m+this.plotHeight-a.height),l+="px;bottom:auto;left:","e"==h.charAt(1)?l+=k-c+x+this.plotWidth-a.width:"w"==h.charAt(1)&&(l+=k+c+x),l+="px;right:auto;";p.style.cssText=u+l,i.mouse.relative&&(/[ew]/.test(h)?/[ns]/.test(h)||(p.style.top=M+m+i.yaxis.d2p(i.y)-t.size(p).height/2+"px"):p.style.left=k+x+i.xaxis.d2p(i.x)-t.size(p).width/2+"px")}}})}(),function(){function t(t){return t.which?1===t.which:0===t.button||1===t.button}function e(t,e){return Math.min(Math.max(0,t),e.plotWidth-1)}function i(t,e){return Math.min(Math.max(0,t),e.plotHeight)}var o=(Flotr.DOM,Flotr.EventAdapter),s=Flotr._;Flotr.addPlugin("selection",{options:{pinchOnly:null,mode:null,color:"#B6D9FF",fps:20},callbacks:{"flotr:mouseup":function(t){var e=this.options.selection,i=this.selection,o=this.getEventPosition(t);e&&e.mode&&(i.interval&&clearInterval(i.interval),this.multitouches?i.updateSelection():e.pinchOnly||i.setSelectionPos(i.selection.second,o),i.clearSelection(),i.selecting&&i.selectionIsSane()&&(i.drawSelection(),i.fireSelectEvent(),this.ignoreClick=!0))},"flotr:mousedown":function(e){var i=this.options.selection,o=this.selection,a=this.getEventPosition(e);i&&i.mode&&(!i.mode||!t(e)&&s.isUndefined(e.touches)||(i.pinchOnly||o.setSelectionPos(o.selection.first,a),o.interval&&clearInterval(o.interval),this.lastMousePos.pageX=null,o.selecting=!1,o.interval=setInterval(s.bind(o.updateSelection,this),1e3/i.fps)))},"flotr:destroy":function(){clearInterval(this.selection.interval)}},getArea:function(){{var t,e,i,o,s=this.selection.selection,a=this.axes;s.first,s.second}return t=a.x.p2d(s.first.x),e=a.x.p2d(s.second.x),i=a.y.p2d(s.first.y),o=a.y.p2d(s.second.y),{x1:Math.min(t,e),y1:Math.min(i,o),x2:Math.max(t,e),y2:Math.max(i,o),xfirst:t,xsecond:e,yfirst:i,ysecond:o}},selection:{first:{x:-1,y:-1},second:{x:-1,y:-1}},prevSelection:null,interval:null,fireSelectEvent:function(t){var e=this.selection.getArea();t=t||"select",e.selection=this.selection.selection,o.fire(this.el,"flotr:"+t,[e,this])},setSelection:function(t,o){var s=this.options,a=this.axes.x,n=this.axes.y,l=n.scale,r=a.scale,h=-1!=s.selection.mode.indexOf("x"),c=-1!=s.selection.mode.indexOf("y"),d=this.selection.selection;this.selection.clearSelection(),d.first.y=i(h&&!c?0:(n.max-t.y1)*l,this),d.second.y=i(h&&!c?this.plotHeight-1:(n.max-t.y2)*l,this),d.first.x=e(c&&!h?0:(t.x1-a.min)*r,this),d.second.x=e(c&&!h?this.plotWidth:(t.x2-a.min)*r,this),this.selection.drawSelection(),o||this.selection.fireSelectEvent()},setSelectionPos:function(t,o){var s=this.options.selection.mode,a=this.selection.selection;t.x=-1==s.indexOf("x")?t==a.first?0:this.plotWidth:e(o.relX,this),t.y=-1==s.indexOf("y")?t==a.first?0:this.plotHeight-1:i(o.relY,this)},drawSelection:function(){this.selection.fireSelectEvent("selecting");var t=this.selection.selection,e=this.octx,i=this.options,o=this.plotOffset,s=this.selection.prevSelection;if(!s||t.first.x!=s.first.x||t.first.y!=s.first.y||t.second.x!=s.second.x||t.second.y!=s.second.y){e.save(),e.strokeStyle=this.processColor(i.selection.color,{opacity:.8}),e.lineWidth=1,e.lineJoin="miter",e.fillStyle=this.processColor(i.selection.color,{opacity:.4}),this.selection.prevSelection={first:{x:t.first.x,y:t.first.y},second:{x:t.second.x,y:t.second.y}};var a=Math.min(t.first.x,t.second.x),n=Math.min(t.first.y,t.second.y),l=Math.abs(t.second.x-t.first.x),r=Math.abs(t.second.y-t.first.y);e.fillRect(a+o.left+.5,n+o.top+.5,l,r),e.strokeRect(a+o.left+.5,n+o.top+.5,l,r),e.restore()}},updateSelection:function(){if(this.lastMousePos.pageX){if(this.selection.selecting=!0,this.multitouches)this.selection.setSelectionPos(this.selection.selection.first,this.getEventPosition(this.multitouches[0])),this.selection.setSelectionPos(this.selection.selection.second,this.getEventPosition(this.multitouches[1]));
else{if(this.options.selection.pinchOnly)return;this.selection.setSelectionPos(this.selection.selection.second,this.lastMousePos)}this.selection.clearSelection(),this.selection.selectionIsSane()&&this.selection.drawSelection()}},clearSelection:function(){if(this.selection.prevSelection){var t=this.selection.prevSelection,e=1,i=this.plotOffset,o=Math.min(t.first.x,t.second.x),s=Math.min(t.first.y,t.second.y),a=Math.abs(t.second.x-t.first.x),n=Math.abs(t.second.y-t.first.y);this.octx.clearRect(o+i.left-e+.5,s+i.top-e,a+2*e+.5,n+2*e+.5),this.selection.prevSelection=null}},selectionIsSane:function(){var t=this.selection.selection;return Math.abs(t.second.x-t.first.x)>=5||Math.abs(t.second.y-t.first.y)>=5}})}(),function(){var t=Flotr.DOM;Flotr.addPlugin("labels",{callbacks:{"flotr:afterdraw":function(){this.labels.draw()}},draw:function(){function e(t,e,i){{var o,a=i?e.minorTicks:e.ticks,l=1===e.orientation;1===e.n}for(o={color:e.options.color||p.grid.color,angle:Flotr.toRad(e.options.labelsAngle),textBaseline:"middle"},d=0;d<a.length&&(i?e.options.showMinorLabels:e.options.showLabels);++d)s=a[d],s.label+="",s.label&&s.label.length&&(x=Math.cos(d*r+h)*n,y=Math.sin(d*r+h)*n,o.textAlign=l?Math.abs(x)<.1?"center":0>x?"right":"left":"left",Flotr.drawText(g,s.label,l?x:3,l?y:-(e.ticks[d].v/e.max)*(n-p.fontSize),o))}function i(t,e,i,o){function a(t){return t.options.showLabels&&t.used}function n(t,e,i,o){return t.plotOffset.left+(e?o:i?-p.grid.labelMargin:p.grid.labelMargin+t.plotWidth)}function l(t,e,i,o){return t.plotOffset.top+(e?p.grid.labelMargin:o)+(e&&i?t.plotHeight:0)}var r,h,c=1===e.orientation,f=1===e.n;for(r={color:e.options.color||p.grid.color,textAlign:i,textBaseline:o,angle:Flotr.toRad(e.options.labelsAngle)},r=Flotr.getBestTextAlign(r.angle,r),d=0;d<e.ticks.length&&a(e);++d)s=e.ticks[d],s.label&&s.label.length&&(h=e.d2p(s.v),0>h||h>(c?t.plotWidth:t.plotHeight)||(Flotr.drawText(g,s.label,n(t,c,f,h),l(t,c,f,h),r),c||f||(g.save(),g.strokeStyle=r.color,g.beginPath(),g.moveTo(t.plotOffset.left+t.plotWidth-8,t.plotOffset.top+e.d2p(s.v)),g.lineTo(t.plotOffset.left+t.plotWidth,t.plotOffset.top+e.d2p(s.v)),g.stroke(),g.restore())))}function o(t,e){var i,o,n=1===e.orientation,l=1===e.n,r="",h=t.plotOffset;if(n||l||(g.save(),g.strokeStyle=e.options.color||p.grid.color,g.beginPath()),e.options.showLabels&&(l?!0:e.used))for(d=0;d<e.ticks.length;++d)s=e.ticks[d],!s.label||!s.label.length||(n?h.left:h.top)+e.d2p(s.v)<0||(n?h.left:h.top)+e.d2p(s.v)>(n?t.canvasWidth:t.canvasHeight)||(o=h.top+(n?(l?1:-1)*(t.plotHeight+p.grid.labelMargin):e.d2p(s.v)-e.maxLabel.height/2),i=n?h.left+e.d2p(s.v)-a/2:0,r="",0===d?r=" first":d===e.ticks.length-1&&(r=" last"),r+=n?" flotr-grid-label-x":" flotr-grid-label-y",f+=['<div style="position:absolute; text-align:'+(n?"center":"right")+"; ","top:"+o+"px; ",(n||l?"left:":"right:")+i+"px; ","width:"+(n?a:(l?h.left:h.right)-p.grid.labelMargin)+"px; ",e.options.color?"color:"+e.options.color+"; ":" ",'" class="flotr-grid-label'+r+'">'+s.label+"</div>"].join(" "),n||l||(g.moveTo(h.left+t.plotWidth-8,h.top+e.d2p(s.v)),g.lineTo(h.left+t.plotWidth,h.top+e.d2p(s.v))))}{var s,a,n,l,r,h,c,d,f="",u=0,p=this.options,g=this.ctx,m=this.axes;({size:p.fontSize})}for(d=0;d<m.x.ticks.length;++d)m.x.ticks[d].label&&++u;a=this.plotWidth/u,p.grid.circular&&(g.save(),g.translate(this.plotOffset.left+this.plotWidth/2,this.plotOffset.top+this.plotHeight/2),n=this.plotHeight*p.radar.radiusRatio/2+p.fontSize,l=this.axes.x.ticks.length,r=2*(Math.PI/l),h=-Math.PI/2,e(this,m.x,!1),e(this,m.x,!0),e(this,m.y,!1),e(this,m.y,!0),g.restore()),!p.HtmlText&&this.textEnabled?(i(this,m.x,"center","top"),i(this,m.x2,"center","bottom"),i(this,m.y,"right","middle"),i(this,m.y2,"left","middle")):(m.x.options.showLabels||m.x2.options.showLabels||m.y.options.showLabels||m.y2.options.showLabels)&&!p.grid.circular&&(f="",o(this,m.x),o(this,m.x2),o(this,m.y),o(this,m.y2),g.stroke(),g.restore(),c=t.create("div"),t.setStyles(c,{fontSize:"smaller",color:p.grid.color}),c.className="flotr-labels",t.insert(this.el,c),t.insert(c,f))}})}(),function(){var t=Flotr.DOM,e=Flotr._;Flotr.addPlugin("legend",{options:{show:!0,noColumns:1,labelFormatter:function(t){return t},labelBoxBorderColor:"#CCCCCC",labelBoxWidth:14,labelBoxHeight:10,labelBoxMargin:5,container:null,position:"nw",margin:5,backgroundColor:"#F0F0F0",backgroundOpacity:.85},callbacks:{"flotr:afterinit":function(){this.legend.insertLegend()},"flotr:destroy":function(){var e=this.legend.markup;e&&(this.legend.markup=null,t.remove(e))}},insertLegend:function(){if(this.options.legend.show){var i,o,s,a=this.series,n=this.plotOffset,l=this.options,r=l.legend,h=[],c=!1,d=this.ctx,f=e.filter(a,function(t){return t.label&&!t.hide}).length,u=r.position,p=r.margin,g=r.backgroundOpacity;if(f){var x=r.labelBoxWidth,m=r.labelBoxHeight,v=r.labelBoxMargin,b=n.left+p,y=n.top+p,M=0,k={size:1.1*l.fontSize,color:l.grid.color};for(i=a.length-1;i>-1;--i)a[i].label&&!a[i].hide&&(o=r.labelFormatter(a[i].label),M=Math.max(M,this._text.measureText(o,k).width));var w=Math.round(x+3*v+M),S=Math.round(f*(v+m)+v);if(g||0===g||(g=.1),l.HtmlText||!this.textEnabled||r.container){for(i=0;i<a.length;++i)if(a[i].label&&!a[i].hide){i%r.noColumns===0&&(h.push(c?"</tr><tr>":"<tr>"),c=!0);var T=a[i],F=r.labelBoxWidth,A=r.labelBoxHeight;o=r.labelFormatter(T.label),s="background-color:"+(T.bars&&T.bars.show&&T.bars.fillColor&&T.bars.fill?T.bars.fillColor:T.color)+";",h.push('<td class="flotr-legend-color-box">','<div style="border:1px solid ',r.labelBoxBorderColor,';padding:1px">','<div style="width:',F-1,"px;height:",A-1,"px;border:1px solid ",a[i].color,'">','<div style="width:',F,"px;height:",A,"px;",s,'"></div>',"</div>","</div>","</td>",'<td class="flotr-legend-label">',o,"</td>")}if(c&&h.push("</tr>"),h.length>0){var C='<table style="font-size:smaller;color:'+l.grid.color+'">'+h.join("")+"</table>";if(r.container)C=t.node(C),this.legend.markup=C,t.insert(r.container,C);else{var W={position:"absolute",zIndex:"2",border:"1px solid "+r.labelBoxBorderColor};"n"==u.charAt(0)?(W.top=p+n.top+"px",W.bottom="auto"):"c"==u.charAt(0)?(W.top=p+(this.plotHeight-S)/2+"px",W.bottom="auto"):"s"==u.charAt(0)&&(W.bottom=p+n.bottom+"px",W.top="auto"),"e"==u.charAt(1)?(W.right=p+n.right+"px",W.left="auto"):"w"==u.charAt(1)&&(W.left=p+n.left+"px",W.right="auto");var O=t.create("div");if(O.className="flotr-legend",t.setStyles(O,W),t.insert(O,C),t.insert(this.el,O),!g)return;var z=r.backgroundColor||l.grid.backgroundColor||"#ffffff";e.extend(W,t.size(O),{backgroundColor:z,zIndex:"",border:""}),W.width+="px",W.height+="px",O=t.create("div"),O.className="flotr-legend-bg",t.setStyles(O,W),t.opacity(O,g),t.insert(O," "),t.insert(this.el,O)}}}else{"s"==u.charAt(0)&&(y=n.top+this.plotHeight-(p+S)),"c"==u.charAt(0)&&(y=n.top+this.plotHeight/2-(p+S/2)),"e"==u.charAt(1)&&(b=n.left+this.plotWidth-(p+w)),s=this.processColor(r.backgroundColor,{opacity:g}),d.fillStyle=s,d.fillRect(b,y,w,S),d.strokeStyle=r.labelBoxBorderColor,d.strokeRect(Flotr.toPixel(b),Flotr.toPixel(y),w,S);var H=b+v,I=y+v;for(i=0;i<a.length;i++)a[i].label&&!a[i].hide&&(o=r.labelFormatter(a[i].label),d.fillStyle=a[i].color,d.fillRect(H,I,x-1,m-1),d.strokeStyle=r.labelBoxBorderColor,d.lineWidth=1,d.strokeRect(Math.ceil(H)-1.5,Math.ceil(I)-1.5,x+2,m+2),Flotr.drawText(d,o,H+x+v,I+m,k),I+=m+v)}}}}})}(),function(){function t(t){if(this.options.spreadsheet.tickFormatter)return this.options.spreadsheet.tickFormatter(t);var e=i.find(this.axes.x.ticks,function(e){return e.v==t});return e?e.label:t}var e=Flotr.DOM,i=Flotr._;Flotr.addPlugin("spreadsheet",{options:{show:!1,tabGraphLabel:"Graph",tabDataLabel:"Data",toolbarDownload:"Download CSV",toolbarSelectAll:"Select all",csvFileSeparator:",",decimalSeparator:".",tickFormatter:null,initialTab:"graph"},callbacks:{"flotr:afterconstruct":function(){if(this.options.spreadsheet.show){var t,i=this.spreadsheet,o=e.node('<div class="flotr-tabs-group" style="position:absolute;left:0px;width:'+this.canvasWidth+'px"></div>'),s=e.node('<div style="float:left" class="flotr-tab selected">'+this.options.spreadsheet.tabGraphLabel+"</div>"),a=e.node('<div style="float:left" class="flotr-tab">'+this.options.spreadsheet.tabDataLabel+"</div>");i.tabsContainer=o,i.tabs={graph:s,data:a},e.insert(o,s),e.insert(o,a),e.insert(this.el,o),t=e.size(a).height+2,this.plotOffset.bottom+=t,e.setStyles(o,{top:this.canvasHeight-t+"px"}),this.observe(s,"click",function(){i.showTab("graph")}).observe(a,"click",function(){i.showTab("data")}),"graph"!==this.options.spreadsheet.initialTab&&i.showTab(this.options.spreadsheet.initialTab)}}},loadDataGrid:function(){if(this.seriesData)return this.seriesData;var t=this.series,e={};return i.each(t,function(t,o){i.each(t.data,function(t){var i=t[0],s=t[1],a=e[i];if(a)a[o+1]=s;else{var n=[];n[0]=i,n[o+1]=s,e[i]=n}})}),this.seriesData=i.sortBy(e,function(t,e){return parseInt(e,10)}),this.seriesData},constructDataGrid:function(){if(this.spreadsheet.datagrid)return this.spreadsheet.datagrid;var o,s,a,n=this.series,l=this.spreadsheet.loadDataGrid(),r=["<colgroup><col />"],h=['<table class="flotr-datagrid"><tr class="first-row">'];h.push("<th>&nbsp;</th>"),i.each(n,function(t,e){h.push('<th scope="col">'+(t.label||String.fromCharCode(65+e))+"</th>"),r.push("<col />")}),h.push("</tr>"),i.each(l,function(e){h.push("<tr>"),i.times(n.length+1,function(o){var s="td",a=e[o],n=i.isUndefined(a)?"":Math.round(1e5*a)/1e5;if(0===o){s="th";var l=t.call(this,n);l&&(n=l)}h.push("<"+s+("th"==s?' scope="row"':"")+">"+n+"</"+s+">")},this),h.push("</tr>")},this),r.push("</colgroup>"),a=e.node(h.join("")),o=e.node('<button type="button" class="flotr-datagrid-toolbar-button">'+this.options.spreadsheet.toolbarDownload+"</button>"),s=e.node('<button type="button" class="flotr-datagrid-toolbar-button">'+this.options.spreadsheet.toolbarSelectAll+"</button>"),this.observe(o,"click",i.bind(this.spreadsheet.downloadCSV,this)).observe(s,"click",i.bind(this.spreadsheet.selectAllData,this));var c=e.node('<div class="flotr-datagrid-toolbar"></div>');e.insert(c,o),e.insert(c,s);var d=this.canvasHeight-e.size(this.spreadsheet.tabsContainer).height-2,f=e.node('<div class="flotr-datagrid-container" style="position:absolute;left:0px;top:0px;width:'+this.canvasWidth+"px;height:"+d+'px;overflow:auto;z-index:10"></div>');return e.insert(f,c),e.insert(f,a),e.insert(this.el,f),this.spreadsheet.datagrid=a,this.spreadsheet.container=f,a},showTab:function(t){if(this.spreadsheet.activeTab!==t){switch(t){case"graph":e.hide(this.spreadsheet.container),e.removeClass(this.spreadsheet.tabs.data,"selected"),e.addClass(this.spreadsheet.tabs.graph,"selected");break;case"data":this.spreadsheet.datagrid||this.spreadsheet.constructDataGrid(),e.show(this.spreadsheet.container),e.addClass(this.spreadsheet.tabs.data,"selected"),e.removeClass(this.spreadsheet.tabs.graph,"selected");break;default:throw"Illegal tab name: "+t}this.spreadsheet.activeTab=t}},selectAllData:function(){if(this.spreadsheet.tabs){var t,e,i,o,s=this.spreadsheet.constructDataGrid();return this.spreadsheet.showTab("data"),setTimeout(function(){(i=s.ownerDocument)&&(o=i.defaultView)&&o.getSelection&&i.createRange&&(t=window.getSelection())&&t.removeAllRanges?(e=i.createRange(),e.selectNode(s),t.removeAllRanges(),t.addRange(e)):document.body&&document.body.createTextRange&&(e=document.body.createTextRange())&&(e.moveToElementText(s),e.select())},0),!0}return!1},downloadCSV:function(){var e="",o=this.series,s=this.options,a=this.spreadsheet.loadDataGrid(),n=encodeURIComponent(s.spreadsheet.csvFileSeparator);if(s.spreadsheet.decimalSeparator===s.spreadsheet.csvFileSeparator)throw"The decimal separator is the same as the column separator ("+s.spreadsheet.decimalSeparator+")";i.each(o,function(t,i){e+=n+'"'+(t.label||String.fromCharCode(65+i)).replace(/\"/g,'\\"')+'"'}),e+="%0D%0A",e+=i.reduce(a,function(e,i){var o=t.call(this,i[0])||"";o='"'+(o+"").replace(/\"/g,'\\"')+'"';var a=i.slice(1).join(n);return"."!==s.spreadsheet.decimalSeparator&&(a=a.replace(/\./g,s.spreadsheet.decimalSeparator)),e+o+n+a+"%0D%0A"},"",this),Flotr.isIE&&Flotr.isIE<9?(e=e.replace(new RegExp(n,"g"),decodeURIComponent(n)).replace(/%0A/g,"\n").replace(/%0D/g,"\r"),window.open().document.write(e)):window.open("data:text/csv,"+e)}})}(),function(){var t=Flotr.DOM;Flotr.addPlugin("titles",{callbacks:{"flotr:afterdraw":function(){this.titles.drawTitles()}},drawTitles:function(){var e,i=this.options,o=i.grid.labelMargin,s=this.ctx,a=this.axes;if(!i.HtmlText&&this.textEnabled){var n={size:i.fontSize,color:i.grid.color,textAlign:"center"};i.subtitle&&Flotr.drawText(s,i.subtitle,this.plotOffset.left+this.plotWidth/2,this.titleHeight+this.subtitleHeight-2,n),n.weight=1.5,n.size*=1.5,i.title&&Flotr.drawText(s,i.title,this.plotOffset.left+this.plotWidth/2,this.titleHeight-2,n),n.weight=1.8,n.size*=.8,a.x.options.title&&a.x.used&&(n.textAlign=a.x.options.titleAlign||"center",n.textBaseline="top",n.angle=Flotr.toRad(a.x.options.titleAngle),n=Flotr.getBestTextAlign(n.angle,n),Flotr.drawText(s,a.x.options.title,this.plotOffset.left+this.plotWidth/2,this.plotOffset.top+a.x.maxLabel.height+this.plotHeight+2*o,n)),a.x2.options.title&&a.x2.used&&(n.textAlign=a.x2.options.titleAlign||"center",n.textBaseline="bottom",n.angle=Flotr.toRad(a.x2.options.titleAngle),n=Flotr.getBestTextAlign(n.angle,n),Flotr.drawText(s,a.x2.options.title,this.plotOffset.left+this.plotWidth/2,this.plotOffset.top-a.x2.maxLabel.height-2*o,n)),a.y.options.title&&a.y.used&&(n.textAlign=a.y.options.titleAlign||"right",n.textBaseline="middle",n.angle=Flotr.toRad(a.y.options.titleAngle),n=Flotr.getBestTextAlign(n.angle,n),Flotr.drawText(s,a.y.options.title,this.plotOffset.left-a.y.maxLabel.width-2*o,this.plotOffset.top+this.plotHeight/2,n)),a.y2.options.title&&a.y2.used&&(n.textAlign=a.y2.options.titleAlign||"left",n.textBaseline="middle",n.angle=Flotr.toRad(a.y2.options.titleAngle),n=Flotr.getBestTextAlign(n.angle,n),Flotr.drawText(s,a.y2.options.title,this.plotOffset.left+this.plotWidth+a.y2.maxLabel.width+2*o,this.plotOffset.top+this.plotHeight/2,n))}else{e=[],i.title&&e.push('<div style="position:absolute;top:0;left:',this.plotOffset.left,"px;font-size:1em;font-weight:bold;text-align:center;width:",this.plotWidth,'px;" class="flotr-title">',i.title,"</div>"),i.subtitle&&e.push('<div style="position:absolute;top:',this.titleHeight,"px;left:",this.plotOffset.left,"px;font-size:smaller;text-align:center;width:",this.plotWidth,'px;" class="flotr-subtitle">',i.subtitle,"</div>"),e.push("</div>"),e.push('<div class="flotr-axis-title" style="font-weight:bold;">'),a.x.options.title&&a.x.used&&e.push('<div style="position:absolute;top:',this.plotOffset.top+this.plotHeight+i.grid.labelMargin+a.x.titleSize.height,"px;left:",this.plotOffset.left,"px;width:",this.plotWidth,"px;text-align:",a.x.options.titleAlign,';" class="flotr-axis-title flotr-axis-title-x1">',a.x.options.title,"</div>"),a.x2.options.title&&a.x2.used&&e.push('<div style="position:absolute;top:0;left:',this.plotOffset.left,"px;width:",this.plotWidth,"px;text-align:",a.x2.options.titleAlign,';" class="flotr-axis-title flotr-axis-title-x2">',a.x2.options.title,"</div>"),a.y.options.title&&a.y.used&&e.push('<div style="position:absolute;top:',this.plotOffset.top+this.plotHeight/2-a.y.titleSize.height/2,"px;left:0;text-align:",a.y.options.titleAlign,';" class="flotr-axis-title flotr-axis-title-y1">',a.y.options.title,"</div>"),a.y2.options.title&&a.y2.used&&e.push('<div style="position:absolute;top:',this.plotOffset.top+this.plotHeight/2-a.y.titleSize.height/2,"px;right:0;text-align:",a.y2.options.titleAlign,';" class="flotr-axis-title flotr-axis-title-y2">',a.y2.options.title,"</div>"),e=e.join("");var l=t.create("div");t.setStyles({color:i.grid.color}),l.className="flotr-titles",t.insert(this.el,l),t.insert(l,e)}}})}();