!function(){function t(i){this.orientation=1,this.offset=0,this.datamin=Number.MAX_VALUE,this.datamax=-Number.MAX_VALUE,n.extend(this,i)}function a(i,t){return i=Math.log(Math.max(i,Number.MIN_VALUE)),t!==Math.E&&(i/=Math.log(t)),i}function e(i,t){return t===Math.E?Math.exp(i):Math.pow(t,i)}var n=Flotr._,s="logarithmic";t.prototype={setScale:function(){var i,t=this.length,n=this.max,o=this.min,l=this.offset,c=this.orientation,h=this.options,m=h.scaling===s;i=m?t/(a(n,h.base)-a(o,h.base)):t/(n-o),this.scale=i,m?(this.d2p=function(t){return l+c*(a(t,h.base)-a(o,h.base))*i},this.p2d=function(t){return e((l+c*t)/i+a(o,h.base),h.base)}):(this.d2p=function(t){return l+c*(t-o)*i},this.p2d=function(t){return(l+c*t)/i+o})},calculateTicks:function(){var i=this.options;this.ticks=[],this.minorTicks=[],i.ticks?(this._cleanUserTicks(i.ticks,this.ticks),this._cleanUserTicks(i.minorTicks||[],this.minorTicks)):"time"==i.mode?this._calculateTimeTicks():"logarithmic"===i.scaling?this._calculateLogTicks():this._calculateTicks(),n.each(this.ticks,function(i){i.label+=""}),n.each(this.minorTicks,function(i){i.label+=""})},calculateRange:function(){if(this.used){var i=this,t=i.options,a=null!==t.min?t.min:i.datamin,e=null!==t.max?t.max:i.datamax,n=t.autoscaleMargin;if("logarithmic"==t.scaling&&(0>=a&&(a=i.datamin),0>=e&&(e=a)),e==a){var s=e?.01:1;null===t.min&&(a-=s),null===t.max&&(e+=s)}if("logarithmic"===t.scaling){0>a&&(a=e/t.base);var o=Math.log(e);t.base!=Math.E&&(o/=Math.log(t.base)),o=Math.ceil(o);var l=Math.log(a);t.base!=Math.E&&(l/=Math.log(t.base)),l=Math.ceil(l),i.tickSize=Flotr.getTickSize(t.noTicks,l,o,null===t.tickDecimals?0:t.tickDecimals),null===t.minorTickFreq&&(t.minorTickFreq=o-l>10?0:o-l>5?2:5)}else i.tickSize=Flotr.getTickSize(t.noTicks,a,e,t.tickDecimals);i.min=a,i.max=e,null===t.min&&t.autoscale&&(i.min-=i.tickSize*n,i.min<0&&i.datamin>=0&&(i.min=0),i.min=i.tickSize*Math.floor(i.min/i.tickSize)),null===t.max&&t.autoscale&&(i.max+=i.tickSize*n,i.max>0&&i.datamax<=0&&i.datamax!=i.datamin&&(i.max=0),i.max=i.tickSize*Math.ceil(i.max/i.tickSize)),i.min==i.max&&(i.max=i.min+1)}},calculateTextDimensions:function(i,t){var a,e,n="";if(this.options.showLabels)for(e=0;e<this.ticks.length;++e)a=this.ticks[e].label.length,a>n.length&&(n=this.ticks[e].label);this.maxLabel=i.dimensions(n,{size:t.fontSize,angle:Flotr.toRad(this.options.labelsAngle)},"font-size:smaller;","flotr-grid-label"),this.titleSize=i.dimensions(this.options.title,{size:1.2*t.fontSize,angle:Flotr.toRad(this.options.titleAngle)},"font-weight:bold;","flotr-axis-title")},_cleanUserTicks:function(i,t){var a,e,s,o,l=this,c=this.options;for(n.isFunction(i)&&(i=i({min:l.min,max:l.max})),e=0;e<i.length;++e)o=i[e],"object"==typeof o?(a=o[0],s=o.length>1?o[1]:c.tickFormatter(a,{min:l.min,max:l.max})):(a=o,s=c.tickFormatter(a,{min:this.min,max:this.max})),t[e]={v:a,label:s}},_calculateTimeTicks:function(){this.ticks=Flotr.Date.generator(this)},_calculateLogTicks:function(){var t,a,e=this,n=e.options,s=Math.log(e.max);n.base!=Math.E&&(s/=Math.log(n.base)),s=Math.ceil(s);var o=Math.log(e.min);for(n.base!=Math.E&&(o/=Math.log(n.base)),o=Math.ceil(o),i=o;s>i;i+=e.tickSize){a=n.base==Math.E?Math.exp(i):Math.pow(n.base,i);var l=a*(n.base==Math.E?Math.exp(e.tickSize):Math.pow(n.base,e.tickSize)),c=(l-a)/n.minorTickFreq;for(e.ticks.push({v:a,label:n.tickFormatter(a,{min:e.min,max:e.max})}),t=a+c;l>t;t+=c)e.minorTicks.push({v:t,label:n.tickFormatter(t,{min:e.min,max:e.max})})}a=n.base==Math.E?Math.exp(i):Math.pow(n.base,i),e.ticks.push({v:a,label:n.tickFormatter(a,{min:e.min,max:e.max})})},_calculateTicks:function(){var i,t,a,e,n,s,o=this,l=o.options,c=o.tickSize,h=o.min,m=o.max,r=c*Math.ceil(h/c);for(l.minorTickFreq&&(t=c/l.minorTickFreq),n=0;(a=e=r+n*c)<=m;++n)if(i=l.tickDecimals,null===i&&(i=1-Math.floor(Math.log(c)/Math.LN10)),0>i&&(i=0),a=a.toFixed(i),o.ticks.push({v:a,label:l.tickFormatter(a,{min:o.min,max:o.max})}),l.minorTickFreq)for(s=0;s<l.minorTickFreq&&m>n*c+s*t;++s)a=e+s*t,o.minorTicks.push({v:a,label:l.tickFormatter(a,{min:o.min,max:o.max})})}},n.extend(t,{getAxes:function(i){return{x:new t({options:i.xaxis,n:1,length:this.plotWidth}),x2:new t({options:i.x2axis,n:2,length:this.plotWidth}),y:new t({options:i.yaxis,n:1,length:this.plotHeight,offset:this.plotHeight,orientation:-1}),y2:new t({options:i.y2axis,n:2,length:this.plotHeight,offset:this.plotHeight,orientation:-1})}}}),Flotr.Axis=t}();