!function(){function e(){var e,t,s,i,n=this.options,l=this.handles,o=this.el;!n.selection.mode||!n.handles.show||"ontouchstart"in o||(l.initialized=!0,i=r.node('<div class="flotr-handles"></div>'),n=n.handles,n.drag&&(s=r.node('<div class="flotr-handles-handle flotr-handles-drag flotr-handles-right"></div>'),t=r.node('<div class="flotr-handles-handle flotr-handles-drag flotr-handles-left"></div>'),r.insert(i,s),r.insert(i,t),r.hide(t),r.hide(s),l.left=t,l.right=s,this.observe(t,"mousedown",function(){l.moveHandler=d}),this.observe(s,"mousedown",function(){l.moveHandler=h})),n.scroll&&(e=r.node('<div class="flotr-handles-handle flotr-handles-scroll"></div>'),r.insert(i,e),r.hide(e),l.scroll=e,this.observe(e,"mousedown",function(){l.moveHandler=a})),this.observe(document,"mouseup",function(){l.moveHandler=null}),r.insert(o,i))}function t(e){if(this.handles.initialized){var t=this.handles,n=this.options.handles,l=t.left,o=t.right,d=t.scroll;n&&(n.drag&&(s(this,l,e.x1),s(this,o,e.x2)),n.scroll&&i(this,d,e.x1,e.x2))}}function s(e,t,s){r.show(t);var i=r.size(t),n=Math.round(e.axes.x.d2p(s)-i.width/2),l=(e.plotHeight-i.height)/2;r.setStyles(t,{left:n+"px",top:l+"px"})}function i(e,t,s,i){r.show(t);var n=r.size(t),l=Math.round(e.axes.x.d2p(s)),o=e.plotHeight-n.height/2,d=e.axes.x.d2p(i)-e.axes.x.d2p(s);r.setStyles(t,{left:l+"px",top:o+"px",width:d+"px"})}function n(){if(this.handles.initialized){var e=this.handles;e&&(r.hide(e.left),r.hide(e.right),r.hide(e.scroll))}}function l(e,t){if(this.handles.initialized&&this.handles.moveHandler){var s=t.x-this.lastMousePos.x,i=(this.selection.selection,this.selection.getArea()),n=this.handles;n.moveHandler(i,s),o(i,n),this.selection.setSelection(i)}}function o(e,t){var s=t.moveHandler;e.x1>e.x2&&(s==d?s=h:s==h&&(s=d),t.moveHandler=s)}function d(e,t){e.x1+=t}function h(e,t){e.x2+=t}function a(e,t){e.x1+=t,e.x2+=t}var r=Flotr.DOM;Flotr.addPlugin("handles",{options:{show:!1,drag:!0,scroll:!0},callbacks:{"flotr:afterinit":e,"flotr:select":t,"flotr:mousedown":n,"flotr:mousemove":l}})}();