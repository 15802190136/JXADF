!function(){var t=Flotr.DOM,i=Flotr._,e=Flotr,s="opacity:0.7;background-color:#000;color:#fff;position:absolute;padding:2px 8px;-moz-border-radius:4px;border-radius:4px;white-space:nowrap;";Flotr.addPlugin("hit",{callbacks:{"flotr:mousemove":function(t,i){this.hit.track(i)},"flotr:click":function(t){var e=this.hit.track(t);e&&!i.isUndefined(e.index)&&(t.hit=e)},"flotr:mouseout":function(t){t.relatedTarget!==this.mouseTrack&&this.hit.clearHit()},"flotr:destroy":function(){this.options.mouse.container&&t.remove(this.mouseTrack),this.mouseTrack=null}},track:function(t){return this.options.mouse.track||i.any(this.series,function(t){return t.mouse&&t.mouse.track})?this.hit.hit(t):void 0},executeOnType:function(t,s,o){function r(t,r){i.each(i.keys(e.graphTypes),function(i){t[i]&&t[i].show&&!t.hide&&this[i][s]&&(a=this.getOptions(t,i),a.fill=!!t.mouse.fillColor,a.fillStyle=this.processColor(t.mouse.fillColor||"#ffffff",{opacity:t.mouse.fillOpacity}),a.color=t.mouse.lineColor,a.context=this.octx,a.index=r,o&&(a.args=o),this[i][s].call(this[i],a),n=!0)},this)}var a,n=!1;return i.isArray(t)||(t=[t]),i.each(t,r,this),n},drawHit:function(t){var i=this.octx,e=t.series;if(e.mouse.lineColor){if(i.save(),i.lineWidth=e.points?e.points.lineWidth:1,i.strokeStyle=e.mouse.lineColor,i.fillStyle=this.processColor(e.mouse.fillColor||"#ffffff",{opacity:e.mouse.fillOpacity}),i.translate(this.plotOffset.left,this.plotOffset.top),!this.hit.executeOnType(e,"drawHit",t)){var s=t.xaxis,o=t.yaxis;i.beginPath(),i.arc(s.d2p(t.x),o.d2p(t.y),e.points.hitRadius||e.points.radius||e.mouse.radius,0,2*Math.PI,!0),i.fill(),i.stroke(),i.closePath()}i.restore(),this.clip(i)}this.prevHit=t},clearHit:function(){var i=this.prevHit,e=this.octx,s=this.plotOffset;if(e.save(),e.translate(s.left,s.top),i){if(!this.hit.executeOnType(i.series,"clearHit",this.prevHit)){var o=i.series,r=o.points?o.points.lineWidth:1;offset=(o.points.hitRadius||o.points.radius||o.mouse.radius)+r,e.clearRect(i.xaxis.d2p(i.x)-offset,i.yaxis.d2p(i.y)-offset,2*offset,2*offset)}t.hide(this.mouseTrack),this.prevHit=null}e.restore()},hit:function(t){var e,s,o,r,a,n,h,l=this.options,c=this.prevHit;if(0!==this.series.length)return h={relX:t.relX,relY:t.relY,absX:t.absX,absY:t.absY,series:this.series},l.mouse.trackY&&!l.mouse.trackAll&&this.hit.executeOnType(this.series,"hit",[t,h])&&!i.isUndefined(h.seriesIndex)?(r=this.series[h.seriesIndex],h.series=r,h.mouse=r.mouse,h.xaxis=r.xaxis,h.yaxis=r.yaxis):(e=this.hit.closest(t),e&&(e=l.mouse.trackY?e.point:e.x,o=e.seriesIndex,r=this.series[o],a=r.xaxis,n=r.yaxis,s=2*r.mouse.sensibility,(l.mouse.trackAll||e.distanceX<s/a.scale&&(!l.mouse.trackY||e.distanceY<s/n.scale))&&(h.series=r,h.xaxis=r.xaxis,h.yaxis=r.yaxis,h.mouse=r.mouse,h.x=e.x,h.y=e.y,h.dist=e.distance,h.index=e.dataIndex,h.seriesIndex=o))),c&&c.index===h.index&&c.seriesIndex===h.seriesIndex||(this.hit.clearHit(),h.series&&h.mouse&&h.mouse.track&&(this.hit.drawMouseTrack(h),this.hit.drawHit(h),Flotr.EventAdapter.fire(this.el,"flotr:hit",[h,this]))),h},closest:function(t){function i(t){t.distance=o,t.distanceX=r,t.distanceY=a,t.seriesIndex=u,t.dataIndex=x,t.x=l,t.y=c,k=!0}var e,s,o,r,a,n,h,l,c,u,x,f=this.series,d=(this.options,t.relX),p=t.relY,m=Number.MAX_VALUE,y=Number.MAX_VALUE,v={},g={},k=!1;for(u=0;u<f.length;u++)if(e=f[u],s=e.data,n=e.xaxis.p2d(d),h=e.yaxis.p2d(p),!e.hide)for(x=s.length;x--;)l=s[x][0],c=s[x][1],s[x].y0&&(c+=s[x].y0),null!==l&&null!==c&&(l<e.xaxis.min||l>e.xaxis.max||(r=Math.abs(l-n),a=Math.abs(c-h),o=r*r+a*a,m>o&&(m=o,i(v)),y>r&&(y=r,i(g))));return k?{point:v,x:g}:!1},drawMouseTrack:function(e){var o,r,a,n="",h=e.series,l=e.mouse.position,c=e.mouse.margin,u=e.x,x=e.y,f=s,d=this.mouseTrack,p=this.plotOffset,m=p.left,y=(p.right,p.bottom,p.top),v=e.mouse.trackDecimals,g=this.options,k=g.mouse.container,b=0,A=0;if(d||(d=t.node('<div class="flotr-mouse-value" style="'+f+'"></div>'),this.mouseTrack=d,t.insert(k||this.el,d)),(!v||0>v)&&(v=0),u&&u.toFixed&&(u=u.toFixed(v)),x&&x.toFixed&&(x=x.toFixed(v)),a=e.mouse.trackFormatter({x:u,y:x,series:e.series,index:e.index,nearest:e,fraction:e.fraction}),i.isNull(a)||i.isUndefined(a))return void t.hide(d);if(d.innerHTML=a,t.show(d),l){if(r=t.size(d),k&&(o=t.position(this.el),b=o.top,A=o.left),e.mouse.relative)if(h.pie&&h.pie.show){var H={x:this.plotWidth/2,y:this.plotHeight/2},w=Math.min(this.canvasWidth,this.canvasHeight)*h.pie.sizeRatio/2,T=e.sAngle<e.eAngle?(e.sAngle+e.eAngle)/2:(e.sAngle+e.eAngle+2*Math.PI)/2;n+="bottom:"+(c-y-H.y-Math.sin(T)*w/2+this.canvasHeight)+"px;top:auto;",n+="left:"+(c+m+H.x+Math.cos(T)*w/2)+"px;right:auto;"}else n+="top:",n+=/n/.test(l)?b-c+y+e.yaxis.d2p(e.y)-r.height:b+c+y+e.yaxis.d2p(e.y),n+="px;bottom:auto;left:",n+=/w/.test(l)?A-c+m+e.xaxis.d2p(e.x)-r.width:A+c+m+e.xaxis.d2p(e.x),n+="px;right:auto;";else n+="top:","n"==l.charAt(0)?n+=b+c+y:"s"==l.charAt(0)&&(n+=b-c+y+this.plotHeight-r.height),n+="px;bottom:auto;left:","e"==l.charAt(1)?n+=A-c+m+this.plotWidth-r.width:"w"==l.charAt(1)&&(n+=A+c+m),n+="px;right:auto;";d.style.cssText=f+n,e.mouse.relative&&(/[ew]/.test(l)?/[ns]/.test(l)||(d.style.top=b+y+e.yaxis.d2p(e.y)-t.size(d).height/2+"px"):d.style.left=A+m+e.xaxis.d2p(e.x)-t.size(d).width/2+"px")}}})}();