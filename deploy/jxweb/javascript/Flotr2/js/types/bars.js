Flotr.addType("bars",{options:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,fillOpacity:.4,horizontal:!1,stacked:!1,centered:!0,topPadding:.1,grouped:!1},stack:{positive:[],negative:[],_positive:[],_negative:[]},draw:function(t){var e=t.context;this.current+=1,e.save(),e.lineJoin="miter",e.lineWidth=t.lineWidth,e.strokeStyle=t.color,t.fill&&(e.fillStyle=t.fillStyle),this.plot(t),e.restore()},plot:function(t){var e,i,a,n,l,r,o=t.data,s=t.context,h=t.shadowSize;if(!(o.length<1))for(this.translate(s,t.horizontal),e=0;e<o.length;e++)i=this.getBarGeometry(o[e][0],o[e][1],t),null!==i&&(a=i.left,n=i.top,l=i.width,r=i.height,t.fill&&s.fillRect(a,n,l,r),h&&(s.save(),s.fillStyle="rgba(0,0,0,0.05)",s.fillRect(a+h,n+h,l,r),s.restore()),t.lineWidth&&s.strokeRect(a,n,l,r))},translate:function(t,e){e&&(t.rotate(-Math.PI/2),t.scale(-1,1))},getBarGeometry:function(t,e,i){var a,n,l,r,o,s=i.horizontal,h=i.barWidth,d=i.centered,c=i.stacked?this.stack:!1,g=i.lineWidth,f=d?h/2:0,u=s?i.yScale:i.xScale,x=s?i.xScale:i.yScale,m=s?e:t,y=s?t:e,v=0;return i.grouped&&(this.current/this.groups,m-=f,h/=this.groups,f=h/2,m=m+h*this.current-f),c&&(a=y>0?c.positive:c.negative,v=a[m]||v,a[m]=v+y),n=u(m-f),l=u(m+h-f),r=x(y+v),o=x(v),0>o&&(o=0),null===t||null===e?null:{x:m,y:y,xScale:u,yScale:x,top:r,left:Math.min(n,l)-g/2,width:Math.abs(l-n)-g,height:o-r}},hit:function(t){var e,i,a=t.data,n=t.args,l=n[0],r=n[1],o=t.xInverse(l.relX),s=t.yInverse(l.relY),h=this.getBarGeometry(o,s,t),d=h.width/2,c=h.left,g=h.y;for(i=a.length;i--;)e=this.getBarGeometry(a[i][0],a[i][1],t),(g>0&&g<e.y||0>g&&g>e.y)&&Math.abs(c-e.left)<d&&(r.x=a[i][0],r.y=a[i][1],r.index=i,r.seriesIndex=t.index)},drawHit:function(t){var e=t.context,i=t.args,a=this.getBarGeometry(i.x,i.y,t),n=a.left,l=a.top,r=a.width,o=a.height;e.save(),e.strokeStyle=t.color,e.lineWidth=t.lineWidth,this.translate(e,t.horizontal),e.beginPath(),e.moveTo(n,l+o),e.lineTo(n,l),e.lineTo(n+r,l),e.lineTo(n+r,l+o),t.fill&&(e.fillStyle=t.fillStyle,e.fill()),e.stroke(),e.closePath(),e.restore()},clearHit:function(t){var e=t.context,i=t.args,a=this.getBarGeometry(i.x,i.y,t),n=a.left,l=a.width,r=a.top,o=a.height,s=2*t.lineWidth;e.save(),this.translate(e,t.horizontal),e.clearRect(n-s,Math.min(r,r+o)-s,l+2*s,Math.abs(o)+2*s),e.restore()},extendXRange:function(t,e,i,a){this._extendRange(t,e,i,a),this.groups=this.groups+1||1,this.current=0},extendYRange:function(t,e,i,a){this._extendRange(t,e,i,a)},_extendRange:function(t,e,i){var a=t.options.max;if(!_.isNumber(a)&&!_.isString(a)){var n,l,r,o=t.min,s=t.max,h=i.horizontal,d=t.orientation,c=this.positiveSums||{},g=this.negativeSums||{};if((1==d&&!h||-1==d&&h)&&i.centered&&(s=Math.max(t.datamax+i.barWidth,s),o=Math.min(t.datamin-i.barWidth,o)),i.stacked&&(1==d&&h||-1==d&&!h))for(r=e.length;r--;)n=e[r][1==d?1:0]+"",l=e[r][1==d?0:1],l>0?(c[n]=(c[n]||0)+l,s=Math.max(s,c[n])):(g[n]=(g[n]||0)+l,o=Math.min(o,g[n]));(1==d&&h||-1==d&&!h)&&i.topPadding&&(t.max===t.datamax||i.stacked&&this.stackMax!==s)&&(s+=i.topPadding*(s-o)),this.stackMin=o,this.stackMax=s,this.negativeSums=g,this.positiveSums=c,t.max=s,t.min=o}}});