Flotr.addType("bubbles",{options:{show:!1,lineWidth:2,fill:!0,fillOpacity:.4,baseRadius:2},draw:function(t){var e=t.context,i=t.shadowSize;e.save(),e.lineWidth=t.lineWidth,e.fillStyle="rgba(0,0,0,0.05)",e.strokeStyle="rgba(0,0,0,0.05)",this.plot(t,i/2),e.strokeStyle="rgba(0,0,0,0.1)",this.plot(t,i/4),e.strokeStyle=t.color,e.fillStyle=t.fillStyle,this.plot(t),e.restore()},plot:function(t,e){var i,l,r=t.data,a=t.context;for(e=e||0,l=0;l<r.length;++l)i=this.getGeometry(r[l],t),a.beginPath(),a.arc(i.x+e,i.y+e,i.z,0,2*Math.PI,!0),a.stroke(),t.fill&&a.fill(),a.closePath()},getGeometry:function(t,e){return{x:e.xScale(t[0]),y:e.yScale(t[1]),z:t[2]*e.baseRadius}},hit:function(t){var e,l,r,a,o=t.data,s=t.args,n=s[0],h=s[1],y=n.relX,c=n.relY;for(h.best=h.best||Number.MAX_VALUE,i=o.length;i--;)l=this.getGeometry(o[i],t),r=l.x-y,a=l.y-c,e=Math.sqrt(r*r+a*a),e<l.z&&l.z<h.best&&(h.x=o[i][0],h.y=o[i][1],h.index=i,h.seriesIndex=t.index,h.best=l.z)},drawHit:function(t){var e=t.context,i=this.getGeometry(t.data[t.args.index],t);e.save(),e.lineWidth=t.lineWidth,e.fillStyle=t.fillStyle,e.strokeStyle=t.color,e.beginPath(),e.arc(i.x,i.y,i.z,0,2*Math.PI,!0),e.fill(),e.stroke(),e.closePath(),e.restore()},clearHit:function(t){var e=t.context,i=this.getGeometry(t.data[t.args.index],t),l=i.z+t.lineWidth;e.save(),e.clearRect(i.x-l,i.y-l,2*l,2*l),e.restore()}});