Flotr.addType("lines",{options:{show:!1,lineWidth:2,fill:!1,fillBorder:!1,fillColor:null,fillOpacity:.4,steps:!1,stacked:!1},stack:{values:[]},draw:function(e){var l,t=e.context,i=e.lineWidth,n=e.shadowSize;t.save(),t.lineJoin="round",n&&(t.lineWidth=n/2,l=i/2+t.lineWidth/2,t.strokeStyle="rgba(0,0,0,0.1)",this.plot(e,l+n/2,!1),t.strokeStyle="rgba(0,0,0,0.2)",this.plot(e,l,!1)),t.lineWidth=i,t.strokeStyle=e.color,this.plot(e,0,!0),t.restore()},plot:function(e,l,t){function i(){!l&&e.fill&&T&&(n=x(T[0]),d.fillStyle=e.fillStyle,d.lineTo(a,p),d.lineTo(n,p),d.lineTo(n,v(T[1])),d.fill(),e.fillBorder&&d.stroke())}var n,a,o,s,r,h,c,d=e.context,u=e.width,f=e.height,x=e.xScale,v=e.yScale,S=e.data,g=e.stacked?this.stack:!1,y=S.length-1,m=null,k=null,p=v(0),T=null;if(!(1>y)){for(d.beginPath(),c=0;y>c;++c)null!==S[c][1]&&null!==S[c+1][1]?(n=x(S[c][0]),a=x(S[c+1][0]),null===T&&(T=S[c]),g?(r=g.values[S[c][0]]||0,h=g.values[S[c+1][0]]||g.values[S[c][0]]||0,o=v(S[c][1]+r),s=v(S[c+1][1]+h),t&&(S[c].y0=r,g.values[S[c][0]]=S[c][1]+r,c==y-1&&(S[c+1].y0=h,g.values[S[c+1][0]]=S[c+1][1]+h))):(o=v(S[c][1]),s=v(S[c+1][1])),o>f&&s>f||0>o&&0>s||0>n&&0>a||n>u&&a>u||((m!=n||k!=o+l)&&d.moveTo(n,o+l),m=a,k=s+l,e.steps?(d.lineTo(m+l/2,o+l),d.lineTo(m+l/2,k)):d.lineTo(m,k))):e.fill&&c>0&&null!==S[c][1]&&(d.stroke(),i(),T=null,d.closePath(),d.beginPath());(!e.fill||e.fill&&!e.fillBorder)&&d.stroke(),i(),d.closePath()}},extendYRange:function(e,l,t,i){var n=e.options;if(t.stacked&&(!n.max&&0!==n.max||!n.min&&0!==n.min)){var a,o,s=e.max,r=e.min,h=i.positiveSums||{},c=i.negativeSums||{};for(o=0;o<l.length;o++)a=l[o][0]+"",l[o][1]>0?(h[a]=(h[a]||0)+l[o][1],s=Math.max(s,h[a])):(c[a]=(c[a]||0)+l[o][1],r=Math.min(r,c[a]));i.negativeSums=c,i.positiveSums=h,e.max=s,e.min=r}t.steps&&(this.hit=function(e){var l,t=e.data,i=e.args,n=e.yScale,a=i[0],o=t.length,s=i[1],r=e.xInverse(a.relX),h=a.relY;for(l=0;o-1>l;l++)if(r>=t[l][0]&&r<=t[l+1][0]){Math.abs(n(t[l][1])-h)<8&&(s.x=t[l][0],s.y=t[l][1],s.index=l,s.seriesIndex=e.index);break}},this.drawHit=function(e){var l,t=e.context,i=e.args,n=e.data,a=e.xScale,o=i.index,s=a(i.x),r=e.yScale(i.y);n.length-1>o&&(l=e.xScale(n[o+1][0]),t.save(),t.strokeStyle=e.color,t.lineWidth=e.lineWidth,t.beginPath(),t.moveTo(s,r),t.lineTo(l,r),t.stroke(),t.closePath(),t.restore())},this.clearHit=function(e){var l,t=e.context,i=e.args,n=e.data,a=e.xScale,o=e.lineWidth,s=i.index,r=a(i.x),h=e.yScale(i.y);n.length-1>s&&(l=e.xScale(n[s+1][0]),t.clearRect(r-o,h-o,l-r+2*o,2*o))})}});