gantt._tooltip={},gantt._tooltip_class="gantt_tooltip",gantt.config.tooltip_timeout=30,gantt._create_tooltip=function(){return this._tooltip_html||(this._tooltip_html=document.createElement("div"),this._tooltip_html.className=gantt._tooltip_class),this._tooltip_html},gantt._show_tooltip=function(t,o){if(!gantt.config.touch||gantt.config.touch_tooltip){var i=this._create_tooltip();i.innerHTML=t,gantt.$task_data.appendChild(i);var e=i.offsetWidth+20,n=i.offsetHeight+40,a=this.$task.offsetHeight,_=this.$task.offsetWidth,l=this.getScrollState();o.x+=l.x,o.y+=l.y,o.y=Math.min(Math.max(l.y,o.y),l.y+a-n),o.x=Math.min(Math.max(l.x,o.x),l.x+_-e),i.style.left=o.x+"px",i.style.top=o.y+"px"}},gantt._hide_tooltip=function(){this._tooltip_html&&this._tooltip_html.parentNode&&this._tooltip_html.parentNode.removeChild(this._tooltip_html),this._tooltip_id=0},gantt._is_tooltip=function(t){var o=t.target||t.srcElement;return gantt._is_node_child(o,function(t){return t.className==this._tooltip_class})},gantt._is_task_line=function(t){var o=t.target||t.srcElement;return gantt._is_node_child(o,function(t){return t==this.$task_data})},gantt._is_node_child=function(t,o){for(var i=!1;t&&!i;)i=o.call(gantt,t),t=t.parentNode;return i},gantt._tooltip_pos=function(t){if(t.pageX||t.pageY)var o={x:t.pageX,y:t.pageY};var i=_isIE?document.documentElement:document.body,o={x:t.clientX+i.scrollLeft-i.clientLeft,y:t.clientY+i.scrollTop-i.clientTop},e=gantt._get_position(gantt.$task);return o.x=o.x-e.x,o.y=o.y-e.y,o},gantt.attachEvent("onMouseMove",function(t,o){this.config.tooltip_timeout?(document.createEventObject&&!document.createEvent&&(o=document.createEventObject(o)),clearTimeout(gantt._tooltip_ev_timer),gantt._tooltip_ev_timer=setTimeout(function(){gantt._init_tooltip(t,o)},gantt.config.tooltip_timeout)):gantt._init_tooltip(t,o)}),gantt._init_tooltip=function(t,o){if(!this._is_tooltip(o)&&(t!=this._tooltip_id||this._is_task_line(o))){if(!t)return this._hide_tooltip();this._tooltip_id=t;var i=this.getTask(t),e=this.templates.tooltip_text(i.start_date,i.end_date,i);e||this._hide_tooltip(),this._show_tooltip(e,this._tooltip_pos(o))}},gantt.attachEvent("onMouseLeave",function(t){gantt._is_tooltip(t)||this._hide_tooltip()}),gantt.templates.tooltip_date_format=gantt.date.date_to_str("%Y-%m-%d"),gantt.templates.tooltip_text=function(t,o,i){return"<b>任务:</b> "+i.text+"<br/><b>开始日期:</b> "+gantt.templates.tooltip_date_format(t)+"<br/><b>结束日期:</b> "+gantt.templates.tooltip_date_format(o)};