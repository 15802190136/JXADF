gantt._tooltip={},gantt._tooltip_class="gantt_tooltip",gantt.config.tooltip_timeout=30,gantt._create_tooltip=function(){return this._tooltip_html||(this._tooltip_html=document.createElement("div"),this._tooltip_html.className=gantt._tooltip_class),this._tooltip_html},gantt._show_tooltip=function(d,h){if(!gantt.config.touch||gantt.config.touch_tooltip){var k=this._create_tooltip();k.innerHTML=d,gantt.$task_data.appendChild(k);var c=k.offsetWidth+20,b=k.offsetHeight+40,f=this.$task.offsetHeight,g=this.$task.offsetWidth,j=this.getScrollState();h.x+=j.x,h.y+=j.y,h.y=Math.min(Math.max(j.y,h.y),j.y+f-b),h.x=Math.min(Math.max(j.x,h.x),j.x+g-c),k.style.left=h.x+"px",k.style.top=h.y+"px"}},gantt._hide_tooltip=function(){this._tooltip_html&&this._tooltip_html.parentNode&&this._tooltip_html.parentNode.removeChild(this._tooltip_html),this._tooltip_id=0},gantt._is_tooltip=function(a){var b=a.target||a.srcElement;return gantt._is_node_child(b,function(c){return c.className==this._tooltip_class})},gantt._is_task_line=function(a){var b=a.target||a.srcElement;return gantt._is_node_child(b,function(c){return c==this.$task_data})},gantt._is_node_child=function(a,b){for(var c=!1;a&&!c;){c=b.call(gantt,a),a=a.parentNode}return c},gantt._tooltip_pos=function(b){if(b.pageX||b.pageY){var c={x:b.pageX,y:b.pageY}}var d=_isIE?document.documentElement:document.body,c={x:b.clientX+d.scrollLeft-d.clientLeft,y:b.clientY+d.scrollTop-d.clientTop},a=gantt._get_position(gantt.$task);return c.x=c.x-a.x,c.y=c.y-a.y,c},gantt.attachEvent("onMouseMove",function(a,b){this.config.tooltip_timeout?(document.createEventObject&&!document.createEvent&&(b=document.createEventObject(b)),clearTimeout(gantt._tooltip_ev_timer),gantt._tooltip_ev_timer=setTimeout(function(){gantt._init_tooltip(a,b)},gantt.config.tooltip_timeout)):gantt._init_tooltip(a,b)}),gantt._init_tooltip=function(b,c){if(!this._is_tooltip(c)&&(b!=this._tooltip_id||this._is_task_line(c))){if(!b){return this._hide_tooltip()}this._tooltip_id=b;var d=this.getTask(b),a=this.templates.tooltip_text(d.start_date,d.end_date,d);a||this._hide_tooltip(),this._show_tooltip(a,this._tooltip_pos(c))}},gantt.attachEvent("onMouseLeave",function(a){gantt._is_tooltip(a)||this._hide_tooltip()}),gantt.templates.tooltip_date_format=gantt.date.date_to_str("%Y-%m-%d"),gantt.templates.tooltip_text=function(a,b,c){return"<b>任务:</b> "+c.text+"<br/><b>开始日期:</b> "+gantt.templates.tooltip_date_format(a)+"<br/><b>结束日期:</b> "+gantt.templates.tooltip_date_format(b)};