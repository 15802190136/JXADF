function myFullCalendar(a){var c=$("#"+a).attr("month");if(c==""||c==null){var b=new Date();c=b.getFullYear()+"-"+(b.getMonth()+1)}$("#"+a).fullCalendar({header:{left:"prev,next",center:"title",right:"month,basicWeek,basicDay"},lang:userLangeCode,defaultDate:c+"-01",defaultView:"month",weekNumbers:true,editable:false,fixedWeekCount:false,height:window.innerHeight-120,dayClick:function(f,e,d){calendarDayClick($("#"+a),f,e,d)},eventClick:function(f,e,d){calendarEventClick($("#"+a),f,e,d)},windowResize:function(d){$("#"+a).fullCalendar("option","height",window.innerHeight-120)}});$(".fc-prev-button").click(function(d){loadCalendarData($("#"+a),d)});$(".fc-next-button").click(function(d){loadCalendarData($("#"+a),d)});loadCalendarData($("#"+a))}function calendarDayClick(d,c,b,a){if($(d).attr("view")=="readonly"){return}var e=$(d).attr("eventurl");if(e.indexOf("?")>0){e=e+"&"}else{e=e+"?"}e=e+"flag=add&day="+c.format();appDialog(jx_appName,jx_appType,$(d).attr("id"),e,800,550,refreshCalendar)}function calendarEventClick(c,e,b,a){var d=$(c).attr("eventurl");if(d==null||d==""){return}if(e.id==null||e.id==""){return}if(d.indexOf("?")>0){d=d+"&"}else{d=d+"?"}d=d+"uid="+e.id+"&view="+$(c).attr("view");if($(c).attr("view")=="readonly"){appDialog(jx_appName,jx_appType,$(c).attr("id"),d,800,550)}else{appDialog(jx_appName,jx_appType,$(c).attr("id"),d,800,550,refreshCalendar)}}function loadCalendarData(f,j){var g=$(f).attr("dataurl");var d=0;while(true){if(g==null||g==""){return}$(f).fullCalendar("removeEventSource",g);var h=$(f).fullCalendar("getDate");if(h!=""&&h!=null){var a=getUrlParamNameValue(g,"month");if(a!=""&&a!=null){g=g.replace(a,"month="+h.format())}else{if(g.indexOf("?")>0){g=g+"&month="+h.format()}else{g=g+"?month="+h.format()}}}var b=$(f).attr("backgroundColor"+d);if(b==null||b==""){$(f).fullCalendar("addEventSource",g)}else{var c=$(f).attr("textColor"+d);if(c==null||c==""){c="#FFFFFF"}$(f).fullCalendar("addEventSource",{url:g,backgroundColor:b,textColor:c})}if(d==0){$(f).attr("dataurl",g)}else{$(f).attr("dataurl"+d,g)}d++;g=$(f).attr("dataurl"+d)}}function refreshCalendar(a,c){var d=$(a).attr("target").id;if(d!=null&&d!=""){if(d.length>3){var b=d.substring(0,d.length-3);$("#"+b).fullCalendar("refetchEvents")}}};