(function(j){var g=0;var i=0;var h;var b;j.fn.flextable=function(r){h=this;e("传入的表格：");e(h);b=j.extend({},j.fn.flextable.defaults,r);return this.each(function(s){var t=j(this);f(t,b.column,s)})};function e(r){if(window.console&&window.console.log){window.console.info(r)}}function m(s){e("clear() : 开始清除原有的表格内容。。");g=0;i=0;var r=s.attr("id");j("#"+r+"_fixColumnTable").remove();j("#"+r+"_fixHeaderTable").remove();j("#"+r+"_fixHeaderColumn").remove()}function l(){e("refreshTable() : 开始刷新表格。。。");h.flextable()}function f(z,t,w){m(z);var s=z.attr("id");var x=j("<table></table>");var r=s+"_fixColumnTable";x.attr("id",r);d(z,x,t);var v=j("<table></table>");var A=s+"_fixHeaderTable";v.attr("id",A);q(z,v);var y=j("<table></table>");var u=s+"_fixHeaderColumn";y.attr("id",u);a(z,v,y,t);j(window).scroll(function(){var D=j("#"+s).find("thead:first");var C=D[0].getBoundingClientRect().top;var B=D[0].getBoundingClientRect().left;if(C<=0){j("#"+A).css("display","");j("#"+u).css({top:"0"})}else{j("#"+A).css("display","none");j("#"+u).css({top:o.getFixHeaderColumnSelfStyle(j("#"+s)[0].getBoundingClientRect().top,"top")})}if(C!=g){j("#"+A).css("position","fixed");j("#"+A).css("top",0);n(D,j("#"+A));j("#"+r).css("position","absolute");j("#"+r).css("left",0);j("#"+r).css("top",o.getFixColumnSelfStyle(D.height(),"top"));g=C}else{if(B!=i){j("#"+A).css("position","absolute");j("#"+A).css("top",0-C);j("#"+r).css("position","fixed");j("#"+r).css("left",z.position().left);j("#"+r).css("top",C+D.height());i=B}}})}function q(t,s){var u=t.find("thead");var r=k(u);s.css({display:"none","border-collapse":"collapse",padding:"0"});t.append(s.append(r))}function k(s){var r=s.clone(true);r.attr("id","fixHeaderTable_header").css({"border-collapse":"collapse"});r.removeClass("ui-resizable");j("th",r).addClass("fixHeader");n(s,r);return r}function n(r,u){e("calcFixHeaderSize() : 调整表头样式。。。");u.css("left",r[0].getBoundingClientRect().left);u.css("width",r.width());var s=j("th",r);var t=j("th",u);j.each(s,function(v,w){j(t[v]).attr("width",w.clientWidth)})}function d(t,u,r){if(r<=0){return}r++;var s=t.find("tbody:last").find("tr");e(s);j.each(s,function(w){var v=j("<tr></tr>");v.attr("id","fixColumnTr_"+w);var x=j(this).find("td");j.each(x,function(y){if(y<r){v.append(j(this).clone(true))}});u.append(v)});u.css({"background-color":b.bgColor,"border-collapse":"collapse",position:"absolute"});c(t,u);t.append(u)}function c(u,v){v.css({top:o.getFixColumnSelfStyle(j(u.find("thead")[0]).height(),"top"),left:0});var s=j(u.find("tbody")[1]);var t=s.find("tr");var r=v.find("tr");j.each(r,function(w){j(this).css("height",j(t[w]).height());var y=j(t[w]).find("td");var x=j(this).find("td");j.each(x,function(A,z){j(z).css("width",o.getFixColumnTdStyle(y[A].clientWidth,"width"));j(z).css("height",o.getFixColumnTdStyle(j(y[A]).height(),"height"))})})}function a(w,v,r,t){if(t<=0){return}var s=v.find("th");var u=j("<tr></tr>");r.append(u.attr("id",w.attr("id")+"_fixHeaderColumnTr"));t++;j.each(s,function(x){if(x<t){var y=j(this).clone(true);y.attr("id",w.attr("id")+"_fixHeaderColumnTh_"+x).css({"background-color":"rgb(139, 168, 203)",border:"1px solid #7C9CC3",padding:"0"});u.append(y)}});r.css({"background-color":b.bgColor,"border-collapse":"collapse",position:"fixed"});p(w,v,r);w.append(r)}function p(t,s,r){r.css({top:o.getFixHeaderColumnSelfStyle(t.find("thead")[0].getBoundingClientRect().top<=0?0:t.find("thead")[0].getBoundingClientRect().top,"top"),left:o.getFixHeaderColumnSelfStyle(t.find("thead")[0].getBoundingClientRect().left,"left")});var v=r.find("tr");v.css("height",o.getFixHeaderColumnTrStyle(j(t.find("thead")[0]).height(),"height"));var w=v.find("th");var u=s.find("th");j.each(w,function(x){j(this).css({width:o.getFixHeaderColumnTdStyle(j(u[x]).width(),"width"),height:o.getFixHeaderColumnTdStyle(j(u[x]).height(),"height")})})}var o={getFixColumnSelfStyle:function(s,r){if(j.JxUtil.browser.isIE){if("top"==r){}else{if("width"==r){}else{if("left"==r){}else{if("height"==r){}}}}}else{if(j.JxUtil.browser.isFF){}else{if(j.JxUtil.browser.isChrome){if("top"==r){}else{if("width"==r){}else{if("left"==r){}else{if("height"==r){}}}}}}}return s},getFixColumnTdStyle:function(s,r){if(j.JxUtil.browser.isIE){if("top"==r){}else{if("width"==r){s+=1}else{if("left"==r){}else{if("height"==r){}}}}}else{if(j.JxUtil.browser.isFF){}else{if(j.JxUtil.browser.isChrome){if("top"==r){}else{if("width"==r){}else{if("left"==r){}else{if("height"==r){}}}}}}}return s},getFixHeaderColumnSelfStyle:function(s,r){if(j.JxUtil.browser.isIE){if("top"==r){s-=0.5}else{if("width"==r){s-=1}else{if("left"==r){s-=0.5}else{if("height"==r){}}}}}else{if(j.JxUtil.browser.isFF){}else{if(j.JxUtil.browser.isChrome){if("top"==r){}else{if("width"==r){}else{if("left"==r){}else{if("height"==r){s-=1}}}}}}}return s},getFixHeaderColumnTrStyle:function(s,r){if(j.JxUtil.browser.isIE){e("调用getFixHeaderColumnTrStyle的IE修复方法：");if("top"==r){}else{if("width"==r){s-=1}else{if("left"==r){s=0}else{if("height"==r){}}}}}else{if(j.JxUtil.browser.isFF){}else{if(j.JxUtil.browser.isChrome){e("调用getFixHeaderColumnTrStyle的Chrome修复方法：");if("top"==r){}else{if("width"==r){s+=1}else{if("left"==r){}else{if("height"==r){}}}}}}}return s},getFixHeaderColumnTdStyle:function(s,r){if(j.JxUtil.browser.isIE){if("top"==r){}else{if("width"==r){s+=1}else{if("left"==r){s=0}else{if("height"==r){}}}}}else{if(j.JxUtil.browser.isFF){}else{if(j.JxUtil.browser.isChrome){if("top"==r){}else{if("width"==r){}else{if("left"==r){}else{if("height"==r){}}}}}}}return s}};j.fn.flextable.setColumn=function(r){j.fn.flextable.defaults.column=r;h.flextable()};j.fn.flextable.refreshHeader=function(r,s){n(r,s)};j.fn.flextable.defaults={column:0,bgColor:"silver"}})(jQuery);jQuery.JxUtil={browser:{isIE:/trident/.test(navigator.userAgent.toLowerCase())||/msie/.test(navigator.userAgent.toLowerCase()),isFF:/firefox/.test(navigator.userAgent.toLowerCase()),isChrome:/chrome/.test(navigator.userAgent.toLowerCase())}};