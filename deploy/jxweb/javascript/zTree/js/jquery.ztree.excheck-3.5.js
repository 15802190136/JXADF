!function(e){var c={event:{CHECK:"ztree_check"},id:{CHECK:"_check"},checkbox:{STYLE:"checkbox",DEFAULT:"chk",DISABLED:"disable",FALSE:"false",TRUE:"true",FULL:"full",PART:"part",FOCUS:"focus"},radio:{STYLE:"radio",TYPE_ALL:"all",TYPE_LEVEL:"level"}},a={check:{enable:!1,autoCheckTrigger:!1,chkStyle:c.checkbox.STYLE,nocheckInherit:!1,chkDisabledInherit:!1,radioType:c.radio.TYPE_LEVEL,chkboxType:{Y:"ps",N:"ps"}},data:{key:{checked:"checked"}},callback:{beforeCheck:null,onCheck:null}},t=function(e){var c=y.getRoot(e);c.radioCheckedList=[]},h=function(){},k=function(e){var c=e.treeObj,a=v.event;c.bind(a.CHECK,function(c,a,t,h){p.apply(e.callback.onCheck,[a?a:c,t,h])})},r=function(e){var c=e.treeObj,a=v.event;c.unbind(a.CHECK)},n=function(e){var c=e.target,a=y.getSetting(e.data.treeId),t="",h=null,k="",r="",n=null,d=null;if(p.eqs(e.type,"mouseover")?a.check.enable&&p.eqs(c.tagName,"span")&&null!==c.getAttribute("treeNode"+v.id.CHECK)&&(t=p.getNodeMainDom(c).id,k="mouseoverCheck"):p.eqs(e.type,"mouseout")?a.check.enable&&p.eqs(c.tagName,"span")&&null!==c.getAttribute("treeNode"+v.id.CHECK)&&(t=p.getNodeMainDom(c).id,k="mouseoutCheck"):p.eqs(e.type,"click")&&a.check.enable&&p.eqs(c.tagName,"span")&&null!==c.getAttribute("treeNode"+v.id.CHECK)&&(t=p.getNodeMainDom(c).id,k="checkNode"),t.length>0)switch(h=y.getNodeCache(a,t),k){case"checkNode":n=C.onCheckNode;break;case"mouseoverCheck":n=C.onMouseoverCheck;break;case"mouseoutCheck":n=C.onMouseoutCheck}var i={stop:"checkNode"===k,node:h,nodeEventType:k,nodeEventCallback:n,treeEventType:r,treeEventCallback:d};return i},d=function(e,c,a,t){if(a){var h=e.data.key.checked;if("string"==typeof a[h]&&(a[h]=p.eqs(a[h],"true")),a[h]=!!a[h],a.checkedOld=a[h],"string"==typeof a.nocheck&&(a.nocheck=p.eqs(a.nocheck,"true")),a.nocheck=!!a.nocheck||e.check.nocheckInherit&&t&&!!t.nocheck,"string"==typeof a.chkDisabled&&(a.chkDisabled=p.eqs(a.chkDisabled,"true")),a.chkDisabled=!!a.chkDisabled||e.check.chkDisabledInherit&&t&&!!t.chkDisabled,"string"==typeof a.halfCheck&&(a.halfCheck=p.eqs(a.halfCheck,"true")),a.halfCheck=!!a.halfCheck,a.check_Child_State=-1,a.check_Focus=!1,a.getCheckStatus=function(){return y.getCheckStatus(e,a)},e.check.chkStyle==v.radio.STYLE&&e.check.radioType==v.radio.TYPE_ALL&&a[h]){var k=y.getRoot(e);k.radioCheckedList.push(a)}}},i=function(e,c,a){e.data.key.checked;e.check.enable&&(y.makeChkFlag(e,c),a.push("<span ID='",c.tId,v.id.CHECK,"' class='",S.makeChkClass(e,c),"' treeNode",v.id.CHECK,c.nocheck===!0?" style='display:none;'":"","></span>"))},o=function(e,c){c.checkNode=function(c,a,t,h){var k=e.data.key.checked;if(c.chkDisabled!==!0&&(a!==!0&&a!==!1&&(a=!c[k]),h=!!h,(c[k]!==a||t)&&(!h||0!=p.apply(this.setting.callback.beforeCheck,[e.treeId,c],!0))&&p.uCanDo(this.setting)&&e.check.enable&&c.nocheck!==!0)){c[k]=a;var r=T(c,v.id.CHECK,e);(t||e.check.chkStyle===v.radio.STYLE)&&S.checkNodeRelation(e,c),S.setChkClass(e,r,c),S.repairParentChkClassWithSelf(e,c),h&&e.treeObj.trigger(v.event.CHECK,[null,e.treeId,c])}},c.checkAllNodes=function(c){S.repairAllChk(e,!!c)},c.getCheckedNodes=function(c){var a=e.data.key.children;return c=c!==!1,y.getTreeCheckedNodes(e,y.getRoot(e)[a],c)},c.getChangeCheckedNodes=function(){var c=e.data.key.children;return y.getTreeChangeCheckedNodes(e,y.getRoot(e)[c])},c.setChkDisabled=function(c,a,t,h){a=!!a,t=!!t,h=!!h,S.repairSonChkDisabled(e,c,a,h),S.repairParentChkDisabled(e,c.getParentNode(),a,t)};var a=c.updateNode;c.updateNode=function(t,h){if(a&&a.apply(c,arguments),t&&e.check.enable){var k=T(t,e);if(k.get(0)&&p.uCanDo(e)){var r=T(t,v.id.CHECK,e);(1==h||e.check.chkStyle===v.radio.STYLE)&&S.checkNodeRelation(e,t),S.setChkClass(e,r,t),S.repairParentChkClassWithSelf(e,t)}}}},l={getRadioCheckedList:function(e){for(var c=y.getRoot(e).radioCheckedList,a=0,t=c.length;t>a;a++)y.getNodeCache(e,c[a].tId)||(c.splice(a,1),a--,t--);return c},getCheckStatus:function(e,c){if(!e.check.enable||c.nocheck||c.chkDisabled)return null;var a=e.data.key.checked,t={checked:c[a],half:c.halfCheck?c.halfCheck:e.check.chkStyle==v.radio.STYLE?2===c.check_Child_State:c[a]?c.check_Child_State>-1&&c.check_Child_State<2:c.check_Child_State>0};return t},getTreeCheckedNodes:function(e,c,a,t){if(!c)return[];var h=e.data.key.children,k=e.data.key.checked,r=a&&e.check.chkStyle==v.radio.STYLE&&e.check.radioType==v.radio.TYPE_ALL;t=t?t:[];for(var n=0,d=c.length;d>n&&(c[n].nocheck===!0||c[n].chkDisabled===!0||c[n][k]!=a||(t.push(c[n]),!r))&&(y.getTreeCheckedNodes(e,c[n][h],a,t),!(r&&t.length>0));n++);return t},getTreeChangeCheckedNodes:function(e,c,a){if(!c)return[];var t=e.data.key.children,h=e.data.key.checked;a=a?a:[];for(var k=0,r=c.length;r>k;k++)c[k].nocheck!==!0&&c[k].chkDisabled!==!0&&c[k][h]!=c[k].checkedOld&&a.push(c[k]),y.getTreeChangeCheckedNodes(e,c[k][t],a);return a},makeChkFlag:function(e,c){if(c){var a=e.data.key.children,t=e.data.key.checked,h=-1;if(c[a])for(var k=0,r=c[a].length;r>k;k++){var n=c[a][k],d=-1;if(e.check.chkStyle==v.radio.STYLE){if(d=n.nocheck===!0||n.chkDisabled===!0?n.check_Child_State:n.halfCheck===!0?2:n[t]?2:n.check_Child_State>0?2:0,2==d){h=2;break}0==d&&(h=0)}else if(e.check.chkStyle==v.checkbox.STYLE){if(d=n.nocheck===!0||n.chkDisabled===!0?n.check_Child_State:n.halfCheck===!0?1:n[t]?-1===n.check_Child_State||2===n.check_Child_State?2:1:n.check_Child_State>0?1:0,1===d){h=1;break}if(2===d&&h>-1&&k>0&&d!==h){h=1;break}if(2===h&&d>-1&&2>d){h=1;break}d>-1&&(h=d)}}c.check_Child_State=h}}},s={},C={onCheckNode:function(e,c){if(c.chkDisabled===!0)return!1;var a=y.getSetting(e.data.treeId),t=a.data.key.checked;if(0==p.apply(a.callback.beforeCheck,[a.treeId,c],!0))return!0;c[t]=!c[t],S.checkNodeRelation(a,c);var h=T(c,v.id.CHECK,a);return S.setChkClass(a,h,c),S.repairParentChkClassWithSelf(a,c),a.treeObj.trigger(v.event.CHECK,[e,a.treeId,c]),!0},onMouseoverCheck:function(e,c){if(c.chkDisabled===!0)return!1;var a=y.getSetting(e.data.treeId),t=T(c,v.id.CHECK,a);return c.check_Focus=!0,S.setChkClass(a,t,c),!0},onMouseoutCheck:function(e,c){if(c.chkDisabled===!0)return!1;var a=y.getSetting(e.data.treeId),t=T(c,v.id.CHECK,a);return c.check_Focus=!1,S.setChkClass(a,t,c),!0}},f={},u={checkNodeRelation:function(e,c){var a,t,h,k=e.data.key.children,r=e.data.key.checked,n=v.radio;if(e.check.chkStyle==n.STYLE){var d=y.getRadioCheckedList(e);if(c[r])if(e.check.radioType==n.TYPE_ALL){for(t=d.length-1;t>=0;t--)a=d[t],a[r]=!1,d.splice(t,1),S.setChkClass(e,T(a,v.id.CHECK,e),a),a.parentTId!=c.parentTId&&S.repairParentChkClassWithSelf(e,a);d.push(c)}else{var i=c.parentTId?c.getParentNode():y.getRoot(e);for(t=0,h=i[k].length;h>t;t++)a=i[k][t],a[r]&&a!=c&&(a[r]=!1,S.setChkClass(e,T(a,v.id.CHECK,e),a))}else if(e.check.radioType==n.TYPE_ALL)for(t=0,h=d.length;h>t;t++)if(c==d[t]){d.splice(t,1);break}}else c[r]&&(!c[k]||0==c[k].length||e.check.chkboxType.Y.indexOf("s")>-1)&&S.setSonNodeCheckBox(e,c,!0),c[r]||c[k]&&0!=c[k].length&&!(e.check.chkboxType.N.indexOf("s")>-1)||S.setSonNodeCheckBox(e,c,!1),c[r]&&e.check.chkboxType.Y.indexOf("p")>-1&&S.setParentNodeCheckBox(e,c,!0),!c[r]&&e.check.chkboxType.N.indexOf("p")>-1&&S.setParentNodeCheckBox(e,c,!1)},makeChkClass:function(e,c){var a=e.data.key.checked,t=v.checkbox,h=v.radio,k="";k=c.chkDisabled===!0?t.DISABLED:c.halfCheck?t.PART:e.check.chkStyle==h.STYLE?c.check_Child_State<1?t.FULL:t.PART:c[a]?2===c.check_Child_State||-1===c.check_Child_State?t.FULL:t.PART:c.check_Child_State<1?t.FULL:t.PART;var r=e.check.chkStyle+"_"+(c[a]?t.TRUE:t.FALSE)+"_"+k;return r=c.check_Focus&&c.chkDisabled!==!0?r+"_"+t.FOCUS:r,v.className.BUTTON+" "+t.DEFAULT+" "+r},repairAllChk:function(e,c){if(e.check.enable&&e.check.chkStyle===v.checkbox.STYLE)for(var a=e.data.key.checked,t=e.data.key.children,h=y.getRoot(e),k=0,r=h[t].length;r>k;k++){var n=h[t][k];n.nocheck!==!0&&n.chkDisabled!==!0&&(n[a]=c),S.setSonNodeCheckBox(e,n,c)}},repairChkClass:function(e,c){if(c&&(y.makeChkFlag(e,c),c.nocheck!==!0)){var a=T(c,v.id.CHECK,e);S.setChkClass(e,a,c)}},repairParentChkClass:function(e,c){if(c&&c.parentTId){var a=c.getParentNode();S.repairChkClass(e,a),S.repairParentChkClass(e,a)}},repairParentChkClassWithSelf:function(e,c){if(c){var a=e.data.key.children;c[a]&&c[a].length>0?S.repairParentChkClass(e,c[a][0]):S.repairParentChkClass(e,c)}},repairSonChkDisabled:function(e,c,a,t){if(c){var h=e.data.key.children;if(c.chkDisabled!=a&&(c.chkDisabled=a),S.repairChkClass(e,c),c[h]&&t)for(var k=0,r=c[h].length;r>k;k++){var n=c[h][k];S.repairSonChkDisabled(e,n,a,t)}}},repairParentChkDisabled:function(e,c,a,t){c&&(c.chkDisabled!=a&&t&&(c.chkDisabled=a),S.repairChkClass(e,c),S.repairParentChkDisabled(e,c.getParentNode(),a,t))},setChkClass:function(e,c,a){c&&(a.nocheck===!0?c.hide():c.show(),c.removeClass(),c.addClass(S.makeChkClass(e,a)))},setParentNodeCheckBox:function(e,c,a,t){var h=e.data.key.children,k=e.data.key.checked,r=T(c,v.id.CHECK,e);if(t||(t=c),y.makeChkFlag(e,c),c.nocheck!==!0&&c.chkDisabled!==!0&&(c[k]=a,S.setChkClass(e,r,c),e.check.autoCheckTrigger&&c!=t&&e.treeObj.trigger(v.event.CHECK,[null,e.treeId,c])),c.parentTId){var n=!0;if(!a)for(var d=c.getParentNode()[h],i=0,o=d.length;o>i;i++)if(d[i].nocheck!==!0&&d[i].chkDisabled!==!0&&d[i][k]||(d[i].nocheck===!0||d[i].chkDisabled===!0)&&d[i].check_Child_State>0){n=!1;break}n&&S.setParentNodeCheckBox(e,c.getParentNode(),a,t)}},setSonNodeCheckBox:function(e,c,a,t){if(c){var h=e.data.key.children,k=e.data.key.checked,r=T(c,v.id.CHECK,e);t||(t=c);var n=!1;if(c[h])for(var d=0,i=c[h].length;i>d&&c.chkDisabled!==!0;d++){var o=c[h][d];S.setSonNodeCheckBox(e,o,a,t),o.chkDisabled===!0&&(n=!0)}c!=y.getRoot(e)&&c.chkDisabled!==!0&&(n&&c.nocheck!==!0&&y.makeChkFlag(e,c),c.nocheck!==!0&&c.chkDisabled!==!0?(c[k]=a,n||(c.check_Child_State=c[h]&&c[h].length>0?a?2:0:-1)):c.check_Child_State=-1,S.setChkClass(e,r,c),e.check.autoCheckTrigger&&c!=t&&c.nocheck!==!0&&c.chkDisabled!==!0&&e.treeObj.trigger(v.event.CHECK,[null,e.treeId,c]))}}},g={tools:f,view:u,event:s,data:l};e.extend(!0,e.fn.zTree.consts,c),e.extend(!0,e.fn.zTree._z,g);var b=e.fn.zTree,p=b._z.tools,v=b.consts,S=b._z.view,y=b._z.data,T=(b._z.event,p.$);y.exSetting(a),y.addInitBind(k),y.addInitUnBind(r),y.addInitCache(h),y.addInitNode(d),y.addInitProxy(n,!0),y.addInitRoot(t),y.addBeforeA(i),y.addZTreeTools(o);var N=S.createNodes;S.createNodes=function(e,c,a,t){N&&N.apply(S,arguments),a&&S.repairParentChkClassWithSelf(e,t)};var E=S.removeNode;S.removeNode=function(e,c){var a=c.getParentNode();E&&E.apply(S,arguments),c&&a&&(S.repairChkClass(e,a),S.repairParentChkClass(e,a))};var _=S.appendNodes;S.appendNodes=function(e,c,a,t){var h="";return _&&(h=_.apply(S,arguments)),t&&y.makeChkFlag(e,t),h}}(jQuery);